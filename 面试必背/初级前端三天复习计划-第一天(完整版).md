# åˆçº§å‰ç«¯ä¸‰å¤©å¤ä¹ è®¡åˆ’ - ç¬¬ä¸€å¤©ï¼ˆå®Œæ•´ç‰ˆï¼‰

> ğŸ“… **å­¦ä¹ æ—¶é—´**ï¼šç¬¬ä¸€å¤© | **ç›®æ ‡**ï¼šæŒæ¡CSSã€Vueã€JavaScriptã€äº‹ä»¶æœºåˆ¶åŸºç¡€ | **å»ºè®®æ—¶é•¿**ï¼š6-8å°æ—¶

## ğŸ“š ä»Šæ—¥å­¦ä¹ å†…å®¹

| æ¨¡å— | æ ¸å¿ƒçŸ¥è¯†ç‚¹ | é‡è¦ç¨‹åº¦ | é¢„è®¡æ—¶é•¿ |
|------|-----------|---------|----------|
| **CSSæ ¸å¿ƒ** | ç›’æ¨¡å‹ã€é€‰æ‹©å™¨ä¼˜å…ˆçº§ | â­â­â­â­â­ | 1.5å°æ—¶ |
| **VueåŸºç¡€** | å“åº”å¼åŸç†ã€ref vs reactiveã€computed vs watch | â­â­â­â­â­ | 2å°æ—¶ |
| **JavaScriptåŸºç¡€** | æ•°æ®ç±»å‹ã€ç±»å‹æ£€æµ‹ã€var/let/const | â­â­â­â­â­ | 2å°æ—¶ |
| **äº‹ä»¶æœºåˆ¶** | äº‹ä»¶æµã€äº‹ä»¶å§”æ‰˜ã€äº‹ä»¶å¯¹è±¡ | â­â­â­â­â­ | 1.5å°æ—¶ |
| **ç»ƒä¹ é¢˜** | ç»¼åˆç»ƒä¹ ä¸å·©å›º | â­â­â­â­â­ | 1å°æ—¶ |

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šCSSæ ¸å¿ƒçŸ¥è¯†ï¼ˆè¯¦ç»†å®Œæ•´ï¼‰

## ä¸€ã€CSSç›’æ¨¡å‹

### 1. ä»€ä¹ˆæ˜¯CSSç›’æ¨¡å‹ï¼Ÿâ­â­â­â­â­ ğŸ”¥ âš ï¸

**å®šä¹‰ï¼š**
- åœ¨HTMLé¡µé¢ä¸­ï¼Œæ‰€æœ‰å…ƒç´ éƒ½å¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ª**çŸ©å½¢ç›’å­**
- ç›’å­ç”±**å†…å®¹(content)ã€å†…è¾¹è·(padding)ã€è¾¹æ¡†(border)ã€å¤–è¾¹è·(margin)**å››éƒ¨åˆ†ç»„æˆ

**ç›’å­ç»„æˆéƒ¨åˆ†ï¼š**
| éƒ¨åˆ† | è¯´æ˜ | CSSå±æ€§ |
|------|------|---------|
| **content** | å†…å®¹åŒºåŸŸ | widthã€height |
| **padding** | å†…è¾¹è·ï¼Œå†…å®¹ä¸è¾¹æ¡†ä¹‹é—´çš„è·ç¦» | padding |
| **border** | è¾¹æ¡† | border |
| **margin** | å¤–è¾¹è·ï¼Œç›’å­ä¸å…¶ä»–ç›’å­ä¹‹é—´çš„è·ç¦» | margin |

**è§†è§‰ç¤ºæ„ï¼š**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ margin â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ border â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€ padding â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚       content           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                         â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è®°å¿†å£è¯€ï¼š**
```
å†…å®¹contentä¸ºæ ¸å¿ƒã€paddingå†…è¾¹è·ã€borderè¾¹æ¡†ã€marginå¤–è¾¹è·
ä»é‡Œåˆ°å¤–ï¼šcontent â†’ padding â†’ border â†’ margin
```

---

### 2. æ ‡å‡†ç›’æ¨¡å‹å’ŒIEç›’æ¨¡å‹çš„åŒºåˆ«ï¼Ÿâ­â­â­â­â­ ğŸ”¥ âš ï¸

**æ ¸å¿ƒåŒºåˆ«ï¼š**
width/heightçš„è®¡ç®—æ–¹å¼ä¸åŒ

#### æ ‡å‡†ç›’æ¨¡å‹ï¼ˆW3Cç›’æ¨¡å‹ï¼‰
- **width/height** åªåŒ…å« **content**
- å…ƒç´ å®é™…å ç”¨å®½åº¦ = `margin + border + padding + content`
- CSSè®¾ç½®ï¼š`box-sizing: content-box`ï¼ˆé»˜è®¤å€¼ï¼‰

```css
.box {
  width: 200px;
  padding: 20px;
  border: 10px solid;
  margin: 10px;
  box-sizing: content-box;  /* æ ‡å‡†ç›’æ¨¡å‹ */
}
/* å®é™…å ç”¨å®½åº¦ = 10 + 10 + 20 + 200 + 20 + 10 + 10 = 280px */
/* contentå®½åº¦ = 200px */
```

#### IEç›’æ¨¡å‹ï¼ˆæ€ªå¼‚ç›’æ¨¡å‹ï¼‰
- **width/height** åŒ…å« **content + padding + border**
- å…ƒç´ å®é™…å ç”¨å®½åº¦ = `margin + width`
- CSSè®¾ç½®ï¼š`box-sizing: border-box`

```css
.box {
  width: 200px;
  padding: 20px;
  border: 10px solid;
  margin: 10px;
  box-sizing: border-box;  /* IEç›’æ¨¡å‹ */
}
/* å®é™…å ç”¨å®½åº¦ = 10 + 200 + 10 = 220px */
/* contentå®½åº¦ = 200 - 20*2 - 10*2 = 140px */
```

**å¯¹æ¯”è¡¨æ ¼ï¼š**
| ç‰¹æ€§ | æ ‡å‡†ç›’æ¨¡å‹ | IEç›’æ¨¡å‹ |
|------|-----------|----------|
| **widthåŒ…å«** | åªæœ‰content | content + padding + border |
| **box-sizing** | content-box | border-box |
| **å†…å®¹å®½åº¦è®¡ç®—** | width = content | width - padding - border = content |
| **å®é™…å ç”¨å®½åº¦** | margin + border + padding + width | margin + width |
| **æ¨èä½¿ç”¨** | é»˜è®¤è¡Œä¸º | âœ… æ›´ç›´è§‚ï¼Œæ¨èä½¿ç”¨ |

**è®°å¿†å£è¯€ï¼š**
```
æ ‡å‡†ç›’æ¨¡å‹ï¼šwidthåªæ˜¯content
IEç›’æ¨¡å‹ï¼šwidthåŒ…å«paddingå’Œborderï¼ˆæ›´ç›´è§‚ï¼‰
box-sizingæ§åˆ¶ï¼šcontent-box(æ ‡å‡†) æˆ– border-box(IE)
```

**æœ€ä½³å®è·µï¼š**
```css
/* æ¨èå…¨å±€è®¾ç½®ä¸ºIEç›’æ¨¡å‹ï¼Œæ›´ç¬¦åˆç›´è§‰ */
* {
  box-sizing: border-box;
}
```

---

## äºŒã€CSSé€‰æ‹©å™¨ä¼˜å…ˆçº§

### 3. CSSé€‰æ‹©å™¨çš„ä¼˜å…ˆçº§è§„åˆ™æ˜¯ä»€ä¹ˆï¼Ÿâ­â­â­â­â­ ğŸ”¥ âš ï¸

**CSSçš„ä¸‰å¤§ç‰¹æ€§ï¼š**
1. **ç»§æ‰¿æ€§**ï¼šå­å…ƒç´ å¯ä»¥ç»§æ‰¿çˆ¶å…ƒç´ çš„æŸäº›æ ·å¼
2. **å±‚å æ€§**ï¼šå¤šä¸ªæ ·å¼å¯ä»¥ä½œç”¨äºåŒä¸€ä¸ªå…ƒç´ 
3. **ä¼˜å…ˆçº§**ï¼šå½“å¤šä¸ªæ ·å¼å†²çªæ—¶ï¼Œæ ¹æ®æƒé‡å†³å®šæ˜¾ç¤ºå“ªä¸ª

**ä¼˜å…ˆçº§ä»é«˜åˆ°ä½ï¼š**
```
!important > è¡Œå†…æ ·å¼ > IDé€‰æ‹©å™¨ > ç±»/ä¼ªç±»/å±æ€§é€‰æ‹©å™¨ > æ ‡ç­¾é€‰æ‹©å™¨ > é€šé…ç¬¦
```

**æƒé‡è®¡ç®—è¡¨æ ¼ï¼š**
| é€‰æ‹©å™¨ç±»å‹ | æƒé‡ | ç¤ºä¾‹ |
|-----------|------|------|
| **!important** | âˆï¼ˆæœ€é«˜ï¼‰ | `color: red !important;` |
| **è¡Œå†…æ ·å¼** | 1000 | `<div style="color: red">` |
| **IDé€‰æ‹©å™¨** | 100 | `#header` |
| **ç±»é€‰æ‹©å™¨** | 10 | `.title` |
| **ä¼ªç±»é€‰æ‹©å™¨** | 10 | `:hover` |
| **å±æ€§é€‰æ‹©å™¨** | 10 | `[type="text"]` |
| **æ ‡ç­¾é€‰æ‹©å™¨** | 1 | `div` |
| **ä¼ªå…ƒç´ ** | 1 | `::before` |
| **é€šé…ç¬¦** | 0 | `*` |

**æƒé‡è®¡ç®—ç¤ºä¾‹ï¼š**
```css
/* æƒé‡ = 100 + 10 + 1 = 111 */
#header .nav li { color: red; }

/* æƒé‡ = 10 + 10 + 1 = 21 */
.container .nav li { color: blue; }

/* æƒé‡ = 1 + 1 + 1 = 3 */
div ul li { color: green; }

/* æœ€ç»ˆæ˜¾ç¤ºçº¢è‰²ï¼Œå› ä¸ºç¬¬ä¸€ä¸ªé€‰æ‹©å™¨æƒé‡æœ€é«˜ */
```

**æ›´å¤šæƒé‡è®¡ç®—ç¤ºä¾‹ï¼š**
```css
/* ç¤ºä¾‹1ï¼šæƒé‡ = 100 + 10 = 110 */
#app .container { color: red; }

/* ç¤ºä¾‹2ï¼šæƒé‡ = 100 + 100 + 10 = 210 */
#header #nav .item { color: blue; }

/* ç¤ºä¾‹3ï¼šæƒé‡ = 10 + 10 + 10 + 1 = 31 */
.nav .menu .item a { color: green; }

/* ç¤ºä¾‹4ï¼šæƒé‡ = 1 + 1 + 1 + 1 = 4 */
div ul li a { color: yellow; }

/* ç¤ºä¾‹5ï¼šè¡Œå†…æ ·å¼æƒé‡ = 1000 */
<div style="color: purple">æœ€é«˜ä¼˜å…ˆçº§ï¼ˆé™¤äº†!importantï¼‰</div>

/* ç¤ºä¾‹6ï¼š!importantæœ€é«˜ */
p { color: orange !important; }  /* æ— è®ºå…¶ä»–é€‰æ‹©å™¨æƒé‡å¤šé«˜ï¼Œè¿™ä¸ªéƒ½ä¼šç”Ÿæ•ˆ */
```

**ç‰¹æ®Šè§„åˆ™ï¼š**
1. **!important** ä¼˜å…ˆçº§æœ€é«˜ï¼Œä½†å°½é‡é¿å…ä½¿ç”¨
2. æƒé‡ç›¸åŒæ—¶ï¼Œåå®šä¹‰çš„è¦†ç›–å…ˆå®šä¹‰çš„
3. ç»§æ‰¿çš„æ ·å¼æƒé‡ä¸º0
4. ç›´æ¥ä½œç”¨äºå…ƒç´ çš„æ ·å¼ä¼˜å…ˆäºç»§æ‰¿çš„æ ·å¼

**è®°å¿†å£è¯€ï¼š**
```
!importantæœ€éœ¸é“
è¡Œå†…æ ·å¼æƒé‡åƒ
IDä¸€ç™¾ç±»åä¸ª
æ ‡ç­¾ä¸€åˆ†é€šé…é›¶
```

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šVueåŸºç¡€ï¼ˆè¯¦ç»†å®Œæ•´ï¼‰

## ä¸€ã€Vueå“åº”å¼åŸç†

### Vue2 vs Vue3 å“åº”å¼åŸç†å¯¹æ¯” â­â­â­â­â­ ğŸ”¥

**å£è¯€ï¼šä¾èµ–æ”¶é›†è§¦å‘æ›´æ–°ã€Proxyæ›¿Object**

#### Vue2ï¼šObject.defineProperty

**å·¥ä½œåŸç†ï¼š**
- éå†dataçš„æ‰€æœ‰å±æ€§ï¼Œä½¿ç”¨`Object.defineProperty`è½¬ä¸ºgetter/setter
- getterè´Ÿè´£ä¾èµ–æ”¶é›†ï¼ˆè®°å½•å“ªäº›åœ°æ–¹ç”¨åˆ°äº†è¿™ä¸ªæ•°æ®ï¼‰
- setterè´Ÿè´£è§¦å‘æ›´æ–°ï¼ˆæ•°æ®å˜åŒ–æ—¶é€šçŸ¥æ‰€æœ‰ä½¿ç”¨è€…ï¼‰

**å®ç°ç¤ºä¾‹ï¼š**
```javascript
// Vue2 å“åº”å¼åŸç†ç®€åŒ–ç‰ˆ
function defineReactive(obj, key, val) {
  // ä¾èµ–æ”¶é›†å™¨
  const dep = [];

  Object.defineProperty(obj, key, {
    get() {
      console.log(`è¯»å– ${key}: ${val}`);
      // æ”¶é›†ä¾èµ–
      if (currentWatcher) {
        dep.push(currentWatcher);
      }
      return val;
    },
    set(newVal) {
      if (newVal === val) return;
      console.log(`è®¾ç½® ${key}: ${newVal}`);
      val = newVal;
      // è§¦å‘æ›´æ–°
      dep.forEach(watcher => watcher.update());
    }
  });
}

// ä½¿ç”¨
const data = {};
defineReactive(data, 'count', 0);
data.count; // è¯»å– count: 0
data.count = 1; // è®¾ç½® count: 1
```

**Vue2 ä¼˜ç‚¹ï¼š**
- å…¼å®¹æ€§å¥½ï¼Œæ”¯æŒIE9+
- å®ç°ç›¸å¯¹ç®€å•

**Vue2 ç¼ºç‚¹ï¼š**
- âŒ æ— æ³•ç›‘å¬å¯¹è±¡å±æ€§çš„æ–°å¢å’Œåˆ é™¤
- âŒ æ— æ³•ç›‘å¬æ•°ç»„ç´¢å¼•å’Œlengthçš„å˜åŒ–
- âŒ éœ€è¦é€’å½’éå†æ‰€æœ‰å±æ€§ï¼Œåˆå§‹åŒ–æ€§èƒ½å¼€é”€å¤§
- âŒ éœ€è¦ä½¿ç”¨`Vue.set`ã€`Vue.delete`ç­‰ç‰¹æ®ŠAPI

```javascript
// Vue2 çš„é™åˆ¶ç¤ºä¾‹
const vm = new Vue({
  data: {
    obj: { name: 'å¼ ä¸‰' },
    arr: [1, 2, 3]
  }
});

// âŒ æ— æ³•ç›‘å¬æ–°å¢å±æ€§
vm.obj.age = 20; // ä¸ä¼šè§¦å‘æ›´æ–°

// âœ… éœ€è¦ä½¿ç”¨ Vue.set
Vue.set(vm.obj, 'age', 20); // å¯ä»¥è§¦å‘æ›´æ–°

// âŒ æ— æ³•ç›‘å¬æ•°ç»„ç´¢å¼•å˜åŒ–
vm.arr[0] = 100; // ä¸ä¼šè§¦å‘æ›´æ–°

// âœ… éœ€è¦ä½¿ç”¨æ•°ç»„å˜å¼‚æ–¹æ³•
vm.arr.splice(0, 1, 100); // å¯ä»¥è§¦å‘æ›´æ–°
```

---

#### Vue3ï¼šProxy

**å·¥ä½œåŸç†ï¼š**
- ä½¿ç”¨`Proxy`ç›´æ¥ä»£ç†æ•´ä¸ªå¯¹è±¡
- å¯ä»¥æ‹¦æˆªå¯¹è±¡çš„æ‰€æœ‰æ“ä½œï¼ˆè¯»å–ã€è®¾ç½®ã€åˆ é™¤ç­‰ï¼‰
- æ‡’ä»£ç†ï¼šåªæœ‰è®¿é—®åˆ°çš„å±æ€§æ‰ä¼šè¢«ä»£ç†

**å®ç°ç¤ºä¾‹ï¼š**
```javascript
// Vue3 å“åº”å¼åŸç†ç®€åŒ–ç‰ˆ
function reactive(target) {
  return new Proxy(target, {
    get(target, key, receiver) {
      console.log(`è¯»å– ${key}`);
      const result = Reflect.get(target, key, receiver);
      // æ”¶é›†ä¾èµ–
      track(target, key);
      // å¦‚æœæ˜¯å¯¹è±¡ï¼Œé€’å½’ä»£ç†ï¼ˆæ‡’ä»£ç†ï¼‰
      if (typeof result === 'object' && result !== null) {
        return reactive(result);
      }
      return result;
    },
    set(target, key, value, receiver) {
      const oldValue = target[key];
      const result = Reflect.set(target, key, value, receiver);
      if (oldValue !== value) {
        console.log(`è®¾ç½® ${key}: ${value}`);
        // è§¦å‘æ›´æ–°
        trigger(target, key);
      }
      return result;
    },
    deleteProperty(target, key) {
      console.log(`åˆ é™¤ ${key}`);
      const result = Reflect.deleteProperty(target, key);
      // è§¦å‘æ›´æ–°
      trigger(target, key);
      return result;
    }
  });
}

// ä½¿ç”¨
const state = reactive({ count: 0 });
state.count; // è¯»å– count
state.count = 1; // è®¾ç½® count: 1
```

**Vue3 ä¼˜ç‚¹ï¼š**
- âœ… å¯ä»¥ç›‘å¬åŠ¨æ€å±æ€§çš„æ–°å¢å’Œåˆ é™¤
- âœ… å¯ä»¥ç›‘å¬æ•°ç»„ç´¢å¼•å’Œlengthçš„å˜åŒ–
- âœ… æ€§èƒ½æ›´å¥½ï¼Œä¸éœ€è¦åˆå§‹é€’å½’éå†æ‰€æœ‰å±æ€§
- âœ… æ”¯æŒMapã€Setã€WeakMapã€WeakSetç­‰æ•°æ®ç»“æ„

**Vue3 ç¼ºç‚¹ï¼š**
- âŒ ä¸æ”¯æŒIE11ï¼ˆä½†Vue3ä¸å†æ”¯æŒIEï¼‰

```javascript
// Vue3 çš„ä¼˜åŠ¿ç¤ºä¾‹
import { reactive } from 'vue';

const state = reactive({
  obj: { name: 'å¼ ä¸‰' },
  arr: [1, 2, 3]
});

// âœ… å¯ä»¥ç›´æ¥æ–°å¢å±æ€§
state.obj.age = 20; // è‡ªåŠ¨è§¦å‘æ›´æ–°

// âœ… å¯ä»¥ç›´æ¥ä¿®æ”¹æ•°ç»„ç´¢å¼•
state.arr[0] = 100; // è‡ªåŠ¨è§¦å‘æ›´æ–°

// âœ… å¯ä»¥ç›´æ¥ä¿®æ”¹length
state.arr.length = 0; // è‡ªåŠ¨è§¦å‘æ›´æ–°

// âœ… å¯ä»¥åˆ é™¤å±æ€§
delete state.obj.name; // è‡ªåŠ¨è§¦å‘æ›´æ–°
```

---

**å®Œæ•´å¯¹æ¯”è¡¨æ ¼ï¼š**

| ç‰¹æ€§ | Vue2 (Object.defineProperty) | Vue3 (Proxy) |
|------|------------------------------|--------------|
| **ç›‘å¬æ–°å¢å±æ€§** | âŒ æ— æ³•ç›‘å¬ï¼Œéœ€è¦`Vue.set` | âœ… å¯ä»¥ç›‘å¬ |
| **ç›‘å¬åˆ é™¤å±æ€§** | âŒ æ— æ³•ç›‘å¬ï¼Œéœ€è¦`Vue.delete` | âœ… å¯ä»¥ç›‘å¬ |
| **ç›‘å¬æ•°ç»„ç´¢å¼•** | âŒ æ— æ³•ç›‘å¬ | âœ… å¯ä»¥ç›‘å¬ |
| **ç›‘å¬æ•°ç»„length** | âŒ æ— æ³•ç›‘å¬ | âœ… å¯ä»¥ç›‘å¬ |
| **åˆå§‹åŒ–æ€§èƒ½** | âŒ éœ€é€’å½’éå†æ‰€æœ‰å±æ€§ | âœ… æ‡’ä»£ç†ï¼ŒæŒ‰éœ€ä»£ç† |
| **æµè§ˆå™¨å…¼å®¹æ€§** | âœ… æ”¯æŒIE9+ | âŒ ä¸æ”¯æŒIE11 |
| **æ”¯æŒæ•°æ®ç»“æ„** | å¯¹è±¡å’Œæ•°ç»„ | å¯¹è±¡ã€æ•°ç»„ã€Mapã€Setç­‰ |
| **APIå¤æ‚åº¦** | éœ€è¦ç‰¹æ®ŠAPI | ç»Ÿä¸€API |

**è®°å¿†å£è¯€ï¼š**
```
Vue2ç”¨definePropertyï¼Œéå†å±æ€§å»ºgetter/setter
æ— æ³•ç›‘å¬æ–°å¢åˆ é™¤ï¼Œæ•°ç»„ç´¢å¼•ä¹Ÿä¸è¡Œ
Vue3ç”¨Proxyä»£ç†ï¼Œæ‹¦æˆªæ‰€æœ‰æ“ä½œ
åŠ¨æ€å±æ€§å…¨ç›‘å¬ï¼Œæ€§èƒ½æ›´å¥½æ›´çµæ´»
```

---

## äºŒã€ref vs reactive

### ref vs reactive è¯¦ç»†å¯¹æ¯” â­â­â­â­

**å£è¯€ï¼šreféœ€valueï¼Œreactiveä¸éœ€**

**å®Œæ•´å¯¹æ¯”è¡¨æ ¼ï¼š**

| ç‰¹æ€§ | ref | reactive |
|------|-----|----------|
| **æ”¯æŒæ•°æ®ç±»å‹** | åŸºæœ¬ç±»å‹ + å¯¹è±¡ç±»å‹ | ä»…å¯¹è±¡ç±»å‹ï¼ˆå¯¹è±¡ã€æ•°ç»„ï¼‰ |
| **è®¿é—®æ–¹å¼** | éœ€è¦`.value`ï¼ˆæ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼‰ | ç›´æ¥è®¿é—®å±æ€§ |
| **é‡æ–°èµ‹å€¼** | âœ… å¯ä»¥æ•´ä½“æ›¿æ¢ | âŒ ä¸å¯æ•´ä½“æ›¿æ¢ï¼Œä¼šå¤±å»å“åº”å¼ |
| **è§£æ„** | âŒ è§£æ„ä¼šå¤±å»å“åº”å¼ï¼Œéœ€`toRefs` | âŒ è§£æ„ä¼šå¤±å»å“åº”å¼ï¼Œéœ€`toRefs` |
| **æ¨¡æ¿ä¸­ä½¿ç”¨** | è‡ªåŠ¨è§£åŒ…ï¼Œä¸éœ€è¦`.value` | ç›´æ¥ä½¿ç”¨ |
| **å“åº”å¼åŸç†** | å†…éƒ¨ä½¿ç”¨`reactive`åŒ…è£… | ç›´æ¥ä½¿ç”¨`Proxy` |
| **ä½¿ç”¨åœºæ™¯** | å•ä¸ªå€¼ã€åŸºæœ¬ç±»å‹ã€éœ€è¦æ›¿æ¢æ•´ä¸ªå¯¹è±¡ | å¤æ‚å¯¹è±¡ã€ä¸éœ€è¦æ•´ä½“æ›¿æ¢ |

---

### ref è¯¦ç»†è¯´æ˜

**åŸºæœ¬ç”¨æ³•ï¼š**
```javascript
import { ref } from 'vue';

// 1. åŸºæœ¬ç±»å‹
const count = ref(0);
console.log(count.value); // 0ï¼Œéœ€è¦.valueè®¿é—®
count.value++; // ä¿®æ”¹éœ€è¦.value

// 2. å¯¹è±¡ç±»å‹
const user = ref({ name: 'å¼ ä¸‰', age: 20 });
console.log(user.value.name); // 'å¼ ä¸‰'ï¼Œéœ€è¦.value
user.value.age++; // ä¿®æ”¹å±æ€§

// 3. æ•°ç»„
const list = ref([1, 2, 3]);
list.value.push(4); // éœ€è¦.value
console.log(list.value[0]); // 1

// 4. æ•´ä½“æ›¿æ¢ï¼ˆrefçš„ä¼˜åŠ¿ï¼‰
const data = ref({ name: 'å¼ ä¸‰' });
data.value = { name: 'æå››' }; // âœ… å¯ä»¥æ•´ä½“æ›¿æ¢
```

**æ¨¡æ¿ä¸­ä½¿ç”¨ï¼ˆè‡ªåŠ¨è§£åŒ…ï¼‰ï¼š**
```vue
<template>
  <!-- refåœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…ï¼Œä¸éœ€è¦.value -->
  <div>{{ count }}</div>
  <button @click="count++">å¢åŠ </button>

  <div>{{ user.name }}</div>
  <button @click="user.age++">å¹´é¾„+1</button>
</template>

<script setup>
import { ref } from 'vue';

const count = ref(0);
const user = ref({ name: 'å¼ ä¸‰', age: 20 });
</script>
```

**ref ä½¿ç”¨åœºæ™¯ï¼š**
1. å•ä¸ªåŸºæœ¬ç±»å‹å€¼
2. éœ€è¦æ•´ä½“æ›¿æ¢å¯¹è±¡çš„åœºæ™¯
3. è¡¨å•è¾“å…¥ç»‘å®š
4. éœ€è¦ä¼ é€’ç»™å­ç»„ä»¶çš„å•ä¸ªå€¼

---

### reactive è¯¦ç»†è¯´æ˜

**åŸºæœ¬ç”¨æ³•ï¼š**
```javascript
import { reactive } from 'vue';

// 1. å¯¹è±¡
const state = reactive({
  count: 0,
  user: {
    name: 'å¼ ä¸‰',
    age: 20
  }
});

// ç›´æ¥è®¿é—®ï¼Œä¸éœ€è¦.value
console.log(state.count); // 0
state.count++; // ç›´æ¥ä¿®æ”¹
console.log(state.user.name); // 'å¼ ä¸‰'

// 2. æ•°ç»„
const list = reactive([1, 2, 3]);
list.push(4); // ç›´æ¥æ“ä½œ
console.log(list[0]); // 1

// âŒ ä¸èƒ½æ•´ä½“æ›¿æ¢ï¼ˆä¼šå¤±å»å“åº”å¼ï¼‰
let state2 = reactive({ count: 0 });
state2 = { count: 1 }; // âŒ é”™è¯¯ï¼å¤±å»å“åº”å¼

// âœ… æ­£ç¡®åšæ³•ï¼šä¿®æ”¹å±æ€§
state2.count = 1; // âœ… æ­£ç¡®
```

**æ¨¡æ¿ä¸­ä½¿ç”¨ï¼š**
```vue
<template>
  <!-- reactive ç›´æ¥ä½¿ç”¨å±æ€§ -->
  <div>{{ state.count }}</div>
  <button @click="state.count++">å¢åŠ </button>

  <div>{{ state.user.name }}</div>
  <button @click="state.user.age++">å¹´é¾„+1</button>
</template>

<script setup>
import { reactive } from 'vue';

const state = reactive({
  count: 0,
  user: { name: 'å¼ ä¸‰', age: 20 }
});
</script>
```

**reactive ä½¿ç”¨åœºæ™¯ï¼š**
1. å¤æ‚å¯¹è±¡çŠ¶æ€
2. å¤šä¸ªç›¸å…³çŠ¶æ€çš„ç»„åˆ
3. ä¸éœ€è¦æ•´ä½“æ›¿æ¢çš„åœºæ™¯

---

### è§£æ„é—®é¢˜ä¸ toRefs

**é—®é¢˜ï¼šè§£æ„ä¼šå¤±å»å“åº”å¼**
```javascript
import { reactive, ref } from 'vue';

// âŒ é”™è¯¯ï¼šè§£æ„reactiveä¼šå¤±å»å“åº”å¼
const state = reactive({ count: 0, name: 'å¼ ä¸‰' });
let { count, name } = state; // å¤±å»å“åº”å¼
count++; // ä¸ä¼šè§¦å‘æ›´æ–°

// âŒ é”™è¯¯ï¼šè§£æ„refä¼šå¤±å»å“åº”å¼
const count2 = ref(0);
let { value } = count2; // å¤±å»å“åº”å¼
value++; // ä¸ä¼šè§¦å‘æ›´æ–°
```

**è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ toRefs**
```javascript
import { reactive, toRefs } from 'vue';

const state = reactive({
  count: 0,
  name: 'å¼ ä¸‰'
});

// âœ… æ­£ç¡®ï¼šä½¿ç”¨toRefsè½¬æ¢
const { count, name } = toRefs(state);

// ç°åœ¨countå’Œnameéƒ½æ˜¯refï¼Œéœ€è¦.value
console.log(count.value); // 0
count.value++; // å¯ä»¥è§¦å‘æ›´æ–°

// åœ¨æ¨¡æ¿ä¸­è‡ªåŠ¨è§£åŒ…
```

**toRefs å®Œæ•´ç¤ºä¾‹ï¼š**
```vue
<template>
  <!-- è§£æ„åçš„å˜é‡å¯ä»¥ç›´æ¥ä½¿ç”¨ -->
  <div>{{ count }}</div>
  <div>{{ name }}</div>
  <button @click="count++">å¢åŠ </button>
  <button @click="name = 'æå››'">æ”¹å</button>
</template>

<script setup>
import { reactive, toRefs } from 'vue';

const state = reactive({
  count: 0,
  name: 'å¼ ä¸‰',
  age: 20
});

// ä½¿ç”¨toRefsè§£æ„ï¼Œä¿æŒå“åº”å¼
const { count, name } = toRefs(state);

// æˆ–è€…å¯¼å‡ºæ•´ä¸ªstate
// defineExpose({ state });
</script>
```

**è®°å¿†å£è¯€ï¼š**
```
refåŸºæœ¬åŠ å¯¹è±¡ï¼Œè®¿é—®éƒ½è¦.value
reactiveä»…å¯¹è±¡ï¼Œç›´æ¥è®¿é—®å±æ€§
refå¯ä»¥æ•´ä½“æ¢ï¼Œreactiveåªæ”¹å±æ€§
è§£æ„å¤±å»å“åº”æ€§ï¼ŒtoRefsæ¥å¸®å¿™
```

---

## ä¸‰ã€computed vs watch

### computed vs watch è¯¦ç»†å¯¹æ¯” â­â­â­â­

**å£è¯€ï¼šè®¡ç®—ç¼“å­˜ä¾¦å¬å‰¯ä½œç”¨**

**å®Œæ•´å¯¹æ¯”è¡¨æ ¼ï¼š**

| ç‰¹æ€§ | computed | watch |
|------|----------|-------|
| **æ˜¯å¦æœ‰ç¼“å­˜** | âœ… æœ‰ç¼“å­˜ï¼Œä¾èµ–ä¸å˜ä¸é‡æ–°è®¡ç®— | âŒ æ— ç¼“å­˜ï¼Œæ¯æ¬¡éƒ½æ‰§è¡Œ |
| **è¿”å›å€¼** | âœ… å¿…é¡»æœ‰è¿”å›å€¼ | âŒ æ— è¿”å›å€¼ |
| **å¼‚æ­¥æ“ä½œ** | âŒ ä¸æ”¯æŒå¼‚æ­¥ | âœ… æ”¯æŒå¼‚æ­¥ |
| **ä½¿ç”¨åœºæ™¯** | è®¡ç®—æ´¾ç”Ÿæ•°æ®ã€æ¨¡æ¿ä¸­ä½¿ç”¨ | ç›‘å¬æ•°æ®å˜åŒ–ã€æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ |
| **å¤šä¸ªæ•°æ®ä¾èµ–** | âœ… è‡ªåŠ¨è¿½è¸ªæ‰€æœ‰ä¾èµ– | éœ€è¦æ˜ç¡®æŒ‡å®šç›‘å¬æº |
| **ç«‹å³æ‰§è¡Œ** | âœ… åˆ›å»ºæ—¶ç«‹å³è®¡ç®— | âŒ é»˜è®¤ä¸ç«‹å³æ‰§è¡Œï¼ˆå¯é…ç½®ï¼‰ |
| **æ€§èƒ½** | æ›´å¥½ï¼ˆæœ‰ç¼“å­˜ï¼‰ | ç›¸å¯¹è¾ƒå·®ï¼ˆæ— ç¼“å­˜ï¼‰ |

---

### computed è¯¦ç»†è¯´æ˜

**åŸºæœ¬ç”¨æ³•ï¼š**
```javascript
import { ref, computed } from 'vue';

const count = ref(0);

// åªè¯»è®¡ç®—å±æ€§
const doubled = computed(() => {
  console.log('computedæ‰§è¡Œ');
  return count.value * 2;
});

console.log(doubled.value); // 0ï¼Œè¾“å‡º'computedæ‰§è¡Œ'
console.log(doubled.value); // 0ï¼Œä¸è¾“å‡ºï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰

count.value = 1;
console.log(doubled.value); // 2ï¼Œè¾“å‡º'computedæ‰§è¡Œ'ï¼ˆä¾èµ–å˜åŒ–ï¼Œé‡æ–°è®¡ç®—ï¼‰
console.log(doubled.value); // 2ï¼Œä¸è¾“å‡ºï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰
```

**å¯å†™è®¡ç®—å±æ€§ï¼š**
```javascript
import { ref, computed } from 'vue';

const firstName = ref('å¼ ');
const lastName = ref('ä¸‰');

// å¯å†™è®¡ç®—å±æ€§
const fullName = computed({
  get() {
    return firstName.value + lastName.value;
  },
  set(newValue) {
    // å‡è®¾è¾“å…¥æ ¼å¼ï¼š'æå››'
    firstName.value = newValue[0];
    lastName.value = newValue.slice(1);
  }
});

console.log(fullName.value); // 'å¼ ä¸‰'
fullName.value = 'æå››';
console.log(firstName.value); // 'æ'
console.log(lastName.value); // 'å››'
```

**å¤šä¾èµ–è®¡ç®—ï¼š**
```javascript
import { ref, computed } from 'vue';

const price = ref(100);
const quantity = ref(2);
const taxRate = ref(0.1);

// è‡ªåŠ¨è¿½è¸ªæ‰€æœ‰ä¾èµ–
const total = computed(() => {
  return price.value * quantity.value * (1 + taxRate.value);
});

console.log(total.value); // 220
price.value = 200;
console.log(total.value); // 440ï¼ˆè‡ªåŠ¨é‡æ–°è®¡ç®—ï¼‰
```

**computed ä½¿ç”¨åœºæ™¯ï¼š**
1. æ•°æ®æ ¼å¼åŒ–ï¼ˆæ—¥æœŸã€é‡‘é¢ç­‰ï¼‰
2. æ•°æ®è¿‡æ»¤å’Œæ’åº
3. å¤šä¸ªæ•°æ®çš„è®¡ç®—ç»“æœ
4. éœ€è¦åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡ä½¿ç”¨çš„è®¡ç®—ç»“æœ

**å®Œæ•´ç¤ºä¾‹ï¼š**
```vue
<template>
  <div>
    <p>åŸä»·ï¼š{{ price }}</p>
    <p>æ•°é‡ï¼š{{ quantity }}</p>
    <p>æŠ˜æ‰£åä»·æ ¼ï¼š{{ discountedPrice }}</p>
    <p>æ€»ä»·ï¼š{{ totalPrice }}</p>
  </div>
</template>

<script setup>
import { ref, computed } from 'vue';

const price = ref(100);
const quantity = ref(2);
const discount = ref(0.8);

// è®¡ç®—æŠ˜æ‰£ä»·æ ¼
const discountedPrice = computed(() => {
  return price.value * discount.value;
});

// è®¡ç®—æ€»ä»·
const totalPrice = computed(() => {
  return discountedPrice.value * quantity.value;
});
</script>
```

---

### watch è¯¦ç»†è¯´æ˜

**åŸºæœ¬ç”¨æ³•ï¼š**
```javascript
import { ref, watch } from 'vue';

const count = ref(0);

// ç›‘å¬å•ä¸ªref
watch(count, (newValue, oldValue) => {
  console.log(`count changed from ${oldValue} to ${newValue}`);
});

count.value = 1; // è¾“å‡ºï¼šcount changed from 0 to 1
```

**ç›‘å¬å¤šä¸ªæ•°æ®æºï¼š**
```javascript
import { ref, watch } from 'vue';

const firstName = ref('å¼ ');
const lastName = ref('ä¸‰');

// ç›‘å¬å¤šä¸ªref
watch([firstName, lastName], ([newFirst, newLast], [oldFirst, oldLast]) => {
  console.log(`å§“åä» ${oldFirst}${oldLast} å˜ä¸º ${newFirst}${newLast}`);
});

firstName.value = 'æ'; // è¾“å‡ºï¼šå§“åä» å¼ ä¸‰ å˜ä¸º æä¸‰
```

**ç›‘å¬reactiveå¯¹è±¡ï¼š**
```javascript
import { reactive, watch } from 'vue';

const state = reactive({
  count: 0,
  user: {
    name: 'å¼ ä¸‰'
  }
});

// ç›‘å¬æ•´ä¸ªreactiveå¯¹è±¡ï¼ˆè‡ªåŠ¨æ·±åº¦ç›‘å¬ï¼‰
watch(state, (newValue, oldValue) => {
  console.log('state changed', newValue);
});

// ç›‘å¬å¯¹è±¡çš„æŸä¸ªå±æ€§ï¼ˆä½¿ç”¨getterå‡½æ•°ï¼‰
watch(
  () => state.count,
  (newValue, oldValue) => {
    console.log(`count changed from ${oldValue} to ${newValue}`);
  }
);

// ç›‘å¬åµŒå¥—å±æ€§
watch(
  () => state.user.name,
  (newValue, oldValue) => {
    console.log(`name changed from ${oldValue} to ${newValue}`);
  }
);
```

**watch é€‰é¡¹å‚æ•°è¯¦è§£ï¼š**

#### 1. immediate - ç«‹å³æ‰§è¡Œ
```javascript
import { ref, watch } from 'vue';

const count = ref(0);

watch(
  count,
  (newValue, oldValue) => {
    console.log(`count: ${newValue}`);
  },
  { immediate: true } // ç«‹å³æ‰§è¡Œä¸€æ¬¡
);
// ç«‹å³è¾“å‡ºï¼šcount: 0

count.value = 1;
// è¾“å‡ºï¼šcount: 1
```

#### 2. deep - æ·±åº¦ç›‘å¬
```javascript
import { ref, watch } from 'vue';

const user = ref({
  name: 'å¼ ä¸‰',
  info: {
    age: 20
  }
});

// ä¸ä½¿ç”¨deepï¼Œç›‘å¬ä¸åˆ°åµŒå¥—å±æ€§å˜åŒ–
watch(user, (newValue) => {
  console.log('user changed', newValue);
});

user.value.info.age = 21; // ä¸ä¼šè§¦å‘

// ä½¿ç”¨deepï¼Œå¯ä»¥ç›‘å¬åˆ°åµŒå¥—å±æ€§å˜åŒ–
watch(
  user,
  (newValue) => {
    console.log('user changed (deep)', newValue);
  },
  { deep: true }
);

user.value.info.age = 22; // ä¼šè§¦å‘
```

#### 3. flush - æ§åˆ¶å›è°ƒæ‰§è¡Œæ—¶æœº
```javascript
import { ref, watch } from 'vue';

const count = ref(0);

// flush: 'pre' - ç»„ä»¶æ›´æ–°å‰æ‰§è¡Œï¼ˆé»˜è®¤ï¼‰
watch(
  count,
  () => {
    console.log('pre: DOMå¯èƒ½è¿˜æœªæ›´æ–°');
  },
  { flush: 'pre' }
);

// flush: 'post' - ç»„ä»¶æ›´æ–°åæ‰§è¡Œ
watch(
  count,
  () => {
    console.log('post: DOMå·²ç»æ›´æ–°');
  },
  { flush: 'post' }
);

// flush: 'sync' - åŒæ­¥æ‰§è¡Œï¼ˆä¸æ¨èï¼Œæ€§èƒ½é—®é¢˜ï¼‰
watch(
  count,
  () => {
    console.log('sync: ç«‹å³åŒæ­¥æ‰§è¡Œ');
  },
  { flush: 'sync' }
);
```

#### 4. once - åªè§¦å‘ä¸€æ¬¡ï¼ˆVue 3.4+ï¼‰
```javascript
import { ref, watch } from 'vue';

const count = ref(0);

watch(
  count,
  () => {
    console.log('åªæ‰§è¡Œä¸€æ¬¡');
  },
  { once: true }
);

count.value = 1; // è¾“å‡ºï¼šåªæ‰§è¡Œä¸€æ¬¡
count.value = 2; // ä¸è¾“å‡º
```

**watch å®Œæ•´é…ç½®ç¤ºä¾‹ï¼š**
```javascript
import { ref, watch } from 'vue';

const user = ref({
  name: 'å¼ ä¸‰',
  age: 20
});

watch(
  user,
  (newValue, oldValue) => {
    console.log('user changed', newValue);
  },
  {
    immediate: true,  // ç«‹å³æ‰§è¡Œä¸€æ¬¡
    deep: true,       // æ·±åº¦ç›‘å¬
    flush: 'post',    // DOMæ›´æ–°åæ‰§è¡Œ
    // once: true     // åªè§¦å‘ä¸€æ¬¡ï¼ˆVue 3.4+ï¼‰
  }
);
```

---

### watchEffect è¯¦ç»†è¯´æ˜

**åŸºæœ¬ç”¨æ³•ï¼š**
```javascript
import { ref, watchEffect } from 'vue';

const count = ref(0);
const doubled = ref(0);

// è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼Œç«‹å³æ‰§è¡Œ
watchEffect(() => {
  console.log(`count: ${count.value}`);
  doubled.value = count.value * 2;
});
// ç«‹å³è¾“å‡ºï¼šcount: 0

count.value = 1;
// è¾“å‡ºï¼šcount: 1
```

**watchEffect vs watchï¼š**

| ç‰¹æ€§ | watchEffect | watch |
|------|-------------|-------|
| **ä¾èµ–è¿½è¸ª** | è‡ªåŠ¨è¿½è¸ªï¼ˆç±»ä¼¼computedï¼‰ | éœ€è¦æ˜ç¡®æŒ‡å®š |
| **ç«‹å³æ‰§è¡Œ** | âœ… ç«‹å³æ‰§è¡Œ | âŒ é»˜è®¤ä¸ç«‹å³ï¼ˆå¯é…ç½®ï¼‰ |
| **è®¿é—®æ—§å€¼** | âŒ æ— æ³•è®¿é—®æ—§å€¼ | âœ… å¯ä»¥è®¿é—®æ–°æ—§å€¼ |
| **ä½¿ç”¨åœºæ™¯** | ç®€å•å‰¯ä½œç”¨ã€è‡ªåŠ¨ä¾èµ–è¿½è¸ª | éœ€è¦æ—§å€¼ã€æ˜ç¡®ç›‘å¬æº |

**å®Œæ•´å¯¹æ¯”ç¤ºä¾‹ï¼š**
```javascript
import { ref, watch, watchEffect } from 'vue';

const count = ref(0);
const doubled = ref(0);

// æ–¹å¼1ï¼šä½¿ç”¨watch
watch(count, (newValue, oldValue) => {
  console.log(`ä» ${oldValue} å˜ä¸º ${newValue}`);
  doubled.value = newValue * 2;
});

// æ–¹å¼2ï¼šä½¿ç”¨watchEffect
watchEffect(() => {
  // è‡ªåŠ¨è¿½è¸ªcount
  console.log(`å½“å‰å€¼: ${count.value}`);
  doubled.value = count.value * 2;
});
```

**åœæ­¢ç›‘å¬ï¼š**
```javascript
import { ref, watch, watchEffect } from 'vue';

const count = ref(0);

// watchå’ŒwatchEffectéƒ½è¿”å›åœæ­¢å‡½æ•°
const stopWatch = watch(count, () => {
  console.log('watching');
});

const stopWatchEffect = watchEffect(() => {
  console.log('effect');
});

// åœæ­¢ç›‘å¬
stopWatch();
stopWatchEffect();

count.value = 1; // ä¸ä¼šè§¦å‘ä»»ä½•è¾“å‡º
```

---

### ä½¿ç”¨åœºæ™¯æ€»ç»“

**ä½¿ç”¨ computedï¼š**
- âœ… éœ€è¦æ ¹æ®å…¶ä»–æ•°æ®è®¡ç®—å¾—åˆ°æ–°æ•°æ®
- âœ… éœ€è¦åœ¨æ¨¡æ¿ä¸­å¤šæ¬¡ä½¿ç”¨è®¡ç®—ç»“æœ
- âœ… éœ€è¦ç¼“å­˜è®¡ç®—ç»“æœï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼‰
- âœ… è®¡ç®—é€»è¾‘æ˜¯åŒæ­¥çš„

**ä½¿ç”¨ watchï¼š**
- âœ… éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼‚æ­¥æ“ä½œ
- âœ… éœ€è¦åœ¨æ•°æ®å˜åŒ–æ—¶æ‰§è¡Œå¼€é”€è¾ƒå¤§çš„æ“ä½œ
- âœ… éœ€è¦è®¿é—®å˜åŒ–å‰åçš„å€¼
- âœ… éœ€è¦æ˜ç¡®æŒ‡å®šç›‘å¬å“ªäº›æ•°æ®

**ä½¿ç”¨ watchEffectï¼š**
- âœ… ç®€å•çš„å‰¯ä½œç”¨æ“ä½œ
- âœ… ä¸éœ€è¦è®¿é—®æ—§å€¼
- âœ… éœ€è¦ç«‹å³æ‰§è¡Œ
- âœ… å¸Œæœ›è‡ªåŠ¨è¿½è¸ªä¾èµ–ï¼ˆä¸æƒ³æ‰‹åŠ¨æŒ‡å®šï¼‰

**å®Œæ•´å®æˆ˜ç¤ºä¾‹ï¼š**
```vue
<template>
  <div>
    <!-- computedï¼šæ•°æ®å±•ç¤º -->
    <p>æ€»ä»·ï¼š{{ totalPrice }}</p>

    <!-- watchï¼šè¡¨å•éªŒè¯ -->
    <input v-model="email" placeholder="è¾“å…¥é‚®ç®±">
    <p v-if="emailError">{{ emailError }}</p>

    <!-- watchEffectï¼šæ—¥å¿—è®°å½• -->
    <p>æ“ä½œæ¬¡æ•°ï¼š{{ operationCount }}</p>
  </div>
</template>

<script setup>
import { ref, computed, watch, watchEffect } from 'vue';

// computed åœºæ™¯ï¼šè®¡ç®—æ€»ä»·
const price = ref(100);
const quantity = ref(2);
const totalPrice = computed(() => price.value * quantity.value);

// watch åœºæ™¯ï¼šå¼‚æ­¥éªŒè¯é‚®ç®±
const email = ref('');
const emailError = ref('');

watch(email, async (newEmail) => {
  if (!newEmail) {
    emailError.value = '';
    return;
  }

  // å¼‚æ­¥éªŒè¯
  const isValid = await validateEmail(newEmail);
  emailError.value = isValid ? '' : 'é‚®ç®±æ ¼å¼ä¸æ­£ç¡®';
});

// watchEffect åœºæ™¯ï¼šè®°å½•æ“ä½œ
const operationCount = ref(0);
watchEffect(() => {
  console.log(`æ€»ä»·: ${totalPrice.value}, é‚®ç®±: ${email.value}`);
  operationCount.value++;
});

// æ¨¡æ‹Ÿå¼‚æ­¥éªŒè¯
async function validateEmail(email) {
  await new Promise(resolve => setTimeout(resolve, 300));
  return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
}
</script>
```

**è®°å¿†å£è¯€ï¼š**
```
computedè®¡ç®—æ´¾ç”Ÿï¼Œæœ‰ç¼“å­˜ä¾èµ–å˜æ‰ç®—
watchç›‘å¬å˜åŒ–ï¼Œå¼‚æ­¥æ“ä½œæœ€æ“…é•¿
watchEffectè‡ªåŠ¨è¿½è¸ªï¼Œç«‹å³æ‰§è¡Œä¸è¦æ—§å€¼
```

---

# ç¬¬ä¸‰éƒ¨åˆ†ï¼šJavaScriptåŸºç¡€ï¼ˆè¯¦ç»†å®Œæ•´ï¼‰

## ä¸€ã€æ•°æ®ç±»å‹

### JavaScript 8ç§æ•°æ®ç±»å‹ â­â­â­â­

**å®Œæ•´åˆ—è¡¨ï¼š**

JavaScriptæœ‰8ç§æ•°æ®ç±»å‹ï¼Œåˆ†ä¸ºä¸¤å¤§ç±»ï¼š

**åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆ7ç§ï¼‰ï¼š**
1. **Number** - æ•°å­—
2. **String** - å­—ç¬¦ä¸²
3. **Boolean** - å¸ƒå°”å€¼
4. **Undefined** - æœªå®šä¹‰
5. **Null** - ç©ºå€¼
6. **Symbol** - ç‹¬ä¸€æ— äºŒçš„å€¼ï¼ˆES6ï¼‰
7. **BigInt** - å¤§æ•´æ•°ï¼ˆES2020ï¼‰

**å¼•ç”¨æ•°æ®ç±»å‹ï¼ˆ1ç§ï¼‰ï¼š**
8. **Object** - å¯¹è±¡ï¼ˆåŒ…æ‹¬Arrayã€Functionã€Dateã€RegExpç­‰ï¼‰

**è¯¦ç»†è¯´æ˜ï¼š**

```javascript
// 1. Number - æ•°å­—ï¼ˆåŒ…æ‹¬æ•´æ•°å’Œæµ®ç‚¹æ•°ï¼‰
let age = 25;
let price = 99.99;
let negative = -10;
let infinity = Infinity;
let notANumber = NaN;

// 2. String - å­—ç¬¦ä¸²
let name = 'å¼ ä¸‰';
let message = "Hello";
let template = `å§“åï¼š${name}`; // æ¨¡æ¿å­—ç¬¦ä¸²

// 3. Boolean - å¸ƒå°”å€¼
let isActive = true;
let isDeleted = false;

// 4. Undefined - æœªå®šä¹‰
let value; // å£°æ˜ä½†æœªèµ‹å€¼
console.log(value); // undefined

// 5. Null - ç©ºå€¼
let data = null; // æ˜ç¡®è¡¨ç¤º"ç©º"

// 6. Symbol - ç‹¬ä¸€æ— äºŒçš„å€¼
let id1 = Symbol('id');
let id2 = Symbol('id');
console.log(id1 === id2); // false

// 7. BigInt - å¤§æ•´æ•°
let bigNumber = 9007199254740991n;
let bigNumber2 = BigInt(9007199254740991);

// 8. Object - å¯¹è±¡
let obj = { name: 'å¼ ä¸‰' };
let arr = [1, 2, 3];
let fn = function() {};
let date = new Date();
let regex = /abc/;
```

**åŸºæœ¬ç±»å‹ vs å¼•ç”¨ç±»å‹çš„åŒºåˆ«ï¼š**

| ç‰¹æ€§ | åŸºæœ¬ç±»å‹ | å¼•ç”¨ç±»å‹ |
|------|---------|---------|
| **å­˜å‚¨ä½ç½®** | æ ˆå†…å­˜ | å †å†…å­˜ï¼ˆæ ˆä¸­å­˜åœ°å€ï¼‰ |
| **èµ‹å€¼æ–¹å¼** | å€¼æ‹·è´ | åœ°å€æ‹·è´ |
| **æ¯”è¾ƒæ–¹å¼** | å€¼æ¯”è¾ƒ | åœ°å€æ¯”è¾ƒ |
| **æ˜¯å¦å¯å˜** | ä¸å¯å˜ | å¯å˜ |

```javascript
// åŸºæœ¬ç±»å‹ - å€¼æ‹·è´
let a = 10;
let b = a;
b = 20;
console.log(a); // 10ï¼ˆaä¸å—å½±å“ï¼‰

// å¼•ç”¨ç±»å‹ - åœ°å€æ‹·è´
let obj1 = { name: 'å¼ ä¸‰' };
let obj2 = obj1;
obj2.name = 'æå››';
console.log(obj1.name); // 'æå››'ï¼ˆobj1å—å½±å“ï¼‰
```

**è®°å¿†å£è¯€ï¼š**
```
æ•°å­—å­—ç¬¦å¸ƒå°”ç©ºï¼Œæœªå®šç¬¦å·å¤§æ•´å‹ï¼ˆ7ä¸ªåŸºæœ¬ï¼‰
å¯¹è±¡å¼•ç”¨æ˜¯ä¸€å®¶ï¼ˆ1ä¸ªå¼•ç”¨ï¼‰
```

æˆ–æ›´é¡ºå£çš„ï¼š
```
æ•°ï¼ˆNumberï¼‰ä¸²ï¼ˆStringï¼‰å¸ƒï¼ˆBooleanï¼‰ç©ºï¼ˆNullï¼‰æœªï¼ˆUndefinedï¼‰
ç¬¦ï¼ˆSymbolï¼‰å·å¤§ï¼ˆBigIntï¼‰æ•´ï¼Œå¯¹ï¼ˆObjectï¼‰è±¡ä¸€å®¶äº²
```

---

## äºŒã€ç±»å‹æ£€æµ‹

### å››ç§ç±»å‹æ£€æµ‹æ–¹æ³• â­â­â­â­

**å£è¯€ï¼štypeofå¿«é€Ÿçœ‹åŸºæœ¬ï¼ŒinstanceofæŸ¥åŸå‹é“¾ï¼ŒtoStringæœ€å‡†ç¡®ï¼ŒArrayä¸“é—¨åˆ¤æ•°ç»„**

---

### 1. typeof - å¿«é€Ÿæ£€æµ‹åŸºæœ¬ç±»å‹

**è¯­æ³•ï¼š**
```javascript
typeof operand
```

**å®Œæ•´ç¤ºä¾‹ï¼ˆæ‰€æœ‰ç±»å‹ï¼‰ï¼š**
```javascript
// åŸºæœ¬ç±»å‹
console.log(typeof 123);           // 'number'
console.log(typeof 'str');         // 'string'
console.log(typeof true);          // 'boolean'
console.log(typeof undefined);     // 'undefined'
console.log(typeof Symbol());      // 'symbol'
console.log(typeof 123n);          // 'bigint'

// å¼•ç”¨ç±»å‹
console.log(typeof {});            // 'object'
console.log(typeof []);            // 'object' âš ï¸
console.log(typeof function(){}); // 'function'
console.log(typeof new Date());    // 'object'
console.log(typeof /regex/);       // 'object'

// ç‰¹æ®Šæƒ…å†µ
console.log(typeof null);          // 'object' âš ï¸ å†å²é—ç•™é—®é¢˜
console.log(typeof NaN);           // 'number'
```

**typeof çš„ç‰¹ç‚¹ï¼š**
- âœ… å¿«é€Ÿã€ç®€å•
- âœ… é€‚åˆæ£€æµ‹åŸºæœ¬ç±»å‹
- âŒ æ— æ³•åŒºåˆ†æ•°ç»„ã€å¯¹è±¡ã€null
- âŒ `typeof null === 'object'` ï¼ˆå†å²bugï¼‰

---

### 2. instanceof - æ£€æµ‹åŸå‹é“¾

**è¯­æ³•ï¼š**
```javascript
object instanceof Constructor
```

**å®Œæ•´ç¤ºä¾‹ï¼š**
```javascript
// æ•°ç»„
const arr = [];
console.log(arr instanceof Array);   // true
console.log(arr instanceof Object);  // trueï¼ˆæ•°ç»„ä¹Ÿæ˜¯å¯¹è±¡ï¼‰

// å¯¹è±¡
const obj = {};
console.log(obj instanceof Object);  // true
console.log(obj instanceof Array);   // false

// å‡½æ•°
const fn = function() {};
console.log(fn instanceof Function); // true
console.log(fn instanceof Object);   // true

// æ—¥æœŸ
const date = new Date();
console.log(date instanceof Date);   // true
console.log(date instanceof Object); // true

// æ­£åˆ™
const regex = /abc/;
console.log(regex instanceof RegExp); // true

// åŸºæœ¬ç±»å‹
console.log(123 instanceof Number);      // falseï¼ˆåŸºæœ¬ç±»å‹ä¸æ˜¯å¯¹è±¡ï¼‰
console.log('str' instanceof String);    // false
console.log(true instanceof Boolean);    // false

// åŒ…è£…å¯¹è±¡
console.log(new Number(123) instanceof Number); // true
```

**instanceof çš„ç‰¹ç‚¹ï¼š**
- âœ… å¯ä»¥æ£€æµ‹å¯¹è±¡ç±»å‹
- âœ… å¯ä»¥æ£€æµ‹ç»§æ‰¿å…³ç³»
- âŒ æ— æ³•æ£€æµ‹åŸºæœ¬ç±»å‹
- âŒ è·¨iframeæ—¶å¯èƒ½å¤±æ•ˆ

**æ‰‹å†™ instanceofï¼š**
```javascript
function myInstanceof(obj, Constructor) {
  // åŸºæœ¬ç±»å‹ç›´æ¥è¿”å›false
  if (typeof obj !== 'object' || obj === null) {
    return false;
  }

  // è·å–å¯¹è±¡çš„åŸå‹
  let proto = Object.getPrototypeOf(obj);

  // è·å–æ„é€ å‡½æ•°çš„prototype
  const prototype = Constructor.prototype;

  // å¾ªç¯éå†åŸå‹é“¾
  while (proto) {
    if (proto === prototype) {
      return true;
    }
    proto = Object.getPrototypeOf(proto);
  }

  return false;
}

// æµ‹è¯•
console.log(myInstanceof([], Array));        // true
console.log(myInstanceof([], Object));       // true
console.log(myInstanceof({}, Array));        // false
console.log(myInstanceof(123, Number));      // false
```

---

### 3. Object.prototype.toString.call() - æœ€å‡†ç¡®çš„æ–¹æ³•

**è¯­æ³•ï¼š**
```javascript
Object.prototype.toString.call(value)
```

**å®Œæ•´ç¤ºä¾‹ï¼ˆæ‰€æœ‰ç±»å‹ï¼‰ï¼š**
```javascript
// åŸºæœ¬ç±»å‹
console.log(Object.prototype.toString.call(123));       // '[object Number]'
console.log(Object.prototype.toString.call('str'));     // '[object String]'
console.log(Object.prototype.toString.call(true));      // '[object Boolean]'
console.log(Object.prototype.toString.call(undefined)); // '[object Undefined]'
console.log(Object.prototype.toString.call(null));      // '[object Null]'
console.log(Object.prototype.toString.call(Symbol()));  // '[object Symbol]'
console.log(Object.prototype.toString.call(123n));      // '[object BigInt]'

// å¼•ç”¨ç±»å‹
console.log(Object.prototype.toString.call({}));        // '[object Object]'
console.log(Object.prototype.toString.call([]));        // '[object Array]'
console.log(Object.prototype.toString.call(function(){})); // '[object Function]'
console.log(Object.prototype.toString.call(new Date())); // '[object Date]'
console.log(Object.prototype.toString.call(/regex/));   // '[object RegExp]'
console.log(Object.prototype.toString.call(new Error())); // '[object Error]'
console.log(Object.prototype.toString.call(Math));      // '[object Math]'
console.log(Object.prototype.toString.call(JSON));      // '[object JSON]'

// ç‰¹æ®Šå¯¹è±¡
console.log(Object.prototype.toString.call(new Map()));    // '[object Map]'
console.log(Object.prototype.toString.call(new Set()));    // '[object Set]'
console.log(Object.prototype.toString.call(new WeakMap())); // '[object WeakMap]'
console.log(Object.prototype.toString.call(new WeakSet())); // '[object WeakSet]'
console.log(Object.prototype.toString.call(Promise.resolve())); // '[object Promise]'
```

**å°è£…ç±»å‹æ£€æµ‹å‡½æ•°ï¼š**
```javascript
// è·å–ç±»å‹
function getType(value) {
  const type = Object.prototype.toString.call(value);
  return type.slice(8, -1).toLowerCase(); // æå–ç±»å‹å
}

// æµ‹è¯•
console.log(getType(123));         // 'number'
console.log(getType('str'));       // 'string'
console.log(getType([]));          // 'array'
console.log(getType({}));          // 'object'
console.log(getType(null));        // 'null'
console.log(getType(undefined));   // 'undefined'
console.log(getType(new Date()));  // 'date'

// åˆ¤æ–­å…·ä½“ç±»å‹
function isArray(value) {
  return getType(value) === 'array';
}

function isObject(value) {
  return getType(value) === 'object';
}

function isFunction(value) {
  return getType(value) === 'function';
}
```

**toString çš„ç‰¹ç‚¹ï¼š**
- âœ… æœ€å‡†ç¡®ã€æœ€é€šç”¨
- âœ… å¯ä»¥æ£€æµ‹æ‰€æœ‰ç±»å‹
- âœ… å¯ä»¥åŒºåˆ†nullå’Œundefined
- âŒ å†™æ³•è¾ƒé•¿

---

### 4. Array.isArray() - ä¸“é—¨åˆ¤æ–­æ•°ç»„

**è¯­æ³•ï¼š**
```javascript
Array.isArray(value)
```

**å®Œæ•´ç¤ºä¾‹ï¼š**
```javascript
// æ•°ç»„
console.log(Array.isArray([]));              // true
console.log(Array.isArray([1, 2, 3]));       // true
console.log(Array.isArray(new Array()));     // true

// ç±»æ•°ç»„å¯¹è±¡
const arrayLike = { 0: 'a', 1: 'b', length: 2 };
console.log(Array.isArray(arrayLike));       // false

// å…¶ä»–ç±»å‹
console.log(Array.isArray({}));              // false
console.log(Array.isArray('array'));         // false
console.log(Array.isArray(123));             // false
console.log(Array.isArray(null));            // false
console.log(Array.isArray(undefined));       // false

// argumentså¯¹è±¡
function test() {
  console.log(Array.isArray(arguments));     // false
}
test();
```

**Array.isArray çš„ç‰¹ç‚¹ï¼š**
- âœ… ä¸“é—¨ç”¨äºåˆ¤æ–­æ•°ç»„
- âœ… è¯­ä¹‰æ¸…æ™°
- âœ… è·¨iframeæœ‰æ•ˆï¼ˆæ¯”instanceofå¯é ï¼‰

---

### å››ç§æ–¹æ³•å¯¹æ¯”è¡¨æ ¼

| æ–¹æ³• | ä¼˜ç‚¹ | ç¼ºç‚¹ | é€‚ç”¨åœºæ™¯ |
|------|------|------|----------|
| **typeof** | å¿«é€Ÿç®€å•ã€æ€§èƒ½å¥½ | æ— æ³•åŒºåˆ†å¯¹è±¡ç±»å‹ã€nullè¿”å›object | æ£€æµ‹åŸºæœ¬ç±»å‹ |
| **instanceof** | å¯ä»¥æ£€æµ‹å¯¹è±¡ç±»å‹ã€æ£€æµ‹ç»§æ‰¿ | æ— æ³•æ£€æµ‹åŸºæœ¬ç±»å‹ã€è·¨iframeå¤±æ•ˆ | æ£€æµ‹å¯¹è±¡å®ä¾‹ç±»å‹ |
| **toString.call()** | æœ€å‡†ç¡®ã€å¯æ£€æµ‹æ‰€æœ‰ç±»å‹ | å†™æ³•è¾ƒé•¿ | éœ€è¦å‡†ç¡®åˆ¤æ–­ç±»å‹æ—¶ |
| **Array.isArray()** | è¯­ä¹‰æ¸…æ™°ã€è·¨iframeæœ‰æ•ˆ | åªèƒ½åˆ¤æ–­æ•°ç»„ | ä¸“é—¨åˆ¤æ–­æ•°ç»„ |

**å®æˆ˜å¯¹æ¯”ç¤ºä¾‹ï¼š**
```javascript
const arr = [];

// æ–¹æ³•1ï¼štypeof
console.log(typeof arr);                      // 'object' âŒ æ— æ³•åˆ¤æ–­æ˜¯æ•°ç»„

// æ–¹æ³•2ï¼šinstanceof
console.log(arr instanceof Array);            // true âœ…

// æ–¹æ³•3ï¼štoString.call()
console.log(Object.prototype.toString.call(arr)); // '[object Array]' âœ…

// æ–¹æ³•4ï¼šArray.isArray()
console.log(Array.isArray(arr));              // true âœ… æœ€æ¨è
```

**è®°å¿†å£è¯€ï¼š**
```
typeofå¿«é€Ÿçœ‹åŸºæœ¬ï¼Œnullå’Œæ•°ç»„è¦å°å¿ƒ
instanceofæŸ¥åŸå‹ï¼ŒåŸºæœ¬ç±»å‹ä¸é€‚ç”¨
toStringæœ€å‡†ç¡®ï¼Œæ‰€æœ‰ç±»å‹éƒ½èƒ½åˆ¤
Array.isArray()ï¼Œä¸“é—¨åˆ¤æ–­æ•°ç»„æœ€å¯é 
```

---

## ä¸‰ã€varã€letã€const

### varã€letã€const è¯¦ç»†å¯¹æ¯” â­â­â­â­

**å®Œæ•´å¯¹æ¯”è¡¨æ ¼ï¼š**

| ç‰¹æ€§ | var | let | const |
|------|-----|-----|-------|
| **ä½œç”¨åŸŸ** | å‡½æ•°ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ |
| **å˜é‡æå‡** | âœ… æå‡ï¼Œåˆå§‹å€¼undefined | âŒ ä¸æå‡ï¼ˆæœ‰æš‚æ—¶æ€§æ­»åŒºï¼‰ | âŒ ä¸æå‡ï¼ˆæœ‰æš‚æ—¶æ€§æ­»åŒºï¼‰ |
| **é‡å¤å£°æ˜** | âœ… å…è®¸ | âŒ ä¸å…è®¸ | âŒ ä¸å…è®¸ |
| **é‡æ–°èµ‹å€¼** | âœ… å…è®¸ | âœ… å…è®¸ | âŒ ä¸å…è®¸ |
| **æš‚æ—¶æ€§æ­»åŒº** | âŒ æ—  | âœ… æœ‰ | âœ… æœ‰ |
| **å…¨å±€å¯¹è±¡å±æ€§** | âœ… æ˜¯ï¼ˆwindow.xxxï¼‰ | âŒ å¦ | âŒ å¦ |
| **å¾ªç¯ä¸­ä½¿ç”¨** | âŒ å…±äº«å˜é‡ | âœ… ç‹¬ç«‹ä½œç”¨åŸŸ | âœ… ç‹¬ç«‹ä½œç”¨åŸŸ |

---

### 1. var - å‡½æ•°ä½œç”¨åŸŸ

**åŸºæœ¬ç‰¹æ€§ï¼š**
```javascript
// 1. å˜é‡æå‡
console.log(a); // undefinedï¼ˆä¸æŠ¥é”™ï¼‰
var a = 1;
// ç›¸å½“äºï¼š
// var a;
// console.log(a);
// a = 1;

// 2. é‡å¤å£°æ˜
var b = 1;
var b = 2; // ä¸æŠ¥é”™
console.log(b); // 2

// 3. å‡½æ•°ä½œç”¨åŸŸ
function test() {
  var c = 3;
  console.log(c); // 3
}
test();
console.log(c); // ReferenceError: c is not defined

// 4. æ²¡æœ‰å—çº§ä½œç”¨åŸŸ
if (true) {
  var d = 4;
}
console.log(d); // 4ï¼ˆå¯ä»¥è®¿é—®ï¼‰

for (var i = 0; i < 3; i++) {
  // ...
}
console.log(i); // 3ï¼ˆå¯ä»¥è®¿é—®ï¼‰

// 5. å…¨å±€ä½œç”¨åŸŸä¸‹ï¼Œvarå£°æ˜çš„å˜é‡ä¼šæˆä¸ºwindowå±æ€§
var e = 5;
console.log(window.e); // 5
```

**var çš„é—®é¢˜ç¤ºä¾‹ï¼š**
```javascript
// é—®é¢˜1ï¼šå¾ªç¯ä¸­çš„var
for (var i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i); // 3, 3, 3ï¼ˆéƒ½æ˜¯3ï¼‰
  }, 1000);
}

// é—®é¢˜2ï¼šæ±¡æŸ“å…¨å±€ä½œç”¨åŸŸ
var name = 'å¼ ä¸‰';
console.log(window.name); // 'å¼ ä¸‰'ï¼ˆæ±¡æŸ“äº†windowå¯¹è±¡ï¼‰

// é—®é¢˜3ï¼šæ²¡æœ‰å—çº§ä½œç”¨åŸŸå¯¼è‡´çš„é—®é¢˜
if (false) {
  var temp = 'test';
}
console.log(temp); // undefinedï¼ˆå˜é‡æå‡ï¼Œä½†æ²¡æœ‰æ‰§è¡Œèµ‹å€¼ï¼‰
```

---

### 2. let - å—çº§ä½œç”¨åŸŸ

**åŸºæœ¬ç‰¹æ€§ï¼š**
```javascript
// 1. å—çº§ä½œç”¨åŸŸ
{
  let a = 1;
  console.log(a); // 1
}
console.log(a); // ReferenceError: a is not defined

// 2. ä¸å…è®¸é‡å¤å£°æ˜
let b = 1;
let b = 2; // SyntaxError: Identifier 'b' has already been declared

// 3. ä¸å­˜åœ¨å˜é‡æå‡ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰
console.log(c); // ReferenceError: Cannot access 'c' before initialization
let c = 3;

// 4. æš‚æ—¶æ€§æ­»åŒºï¼ˆTDZ - Temporal Dead Zoneï¼‰
var d = 1;
{
  console.log(d); // ReferenceErrorï¼ˆå—çº§ä½œç”¨åŸŸå†…æœ‰letå£°æ˜dï¼‰
  let d = 2;
}

// 5. ä¸ä¼šæˆä¸ºå…¨å±€å¯¹è±¡çš„å±æ€§
let e = 5;
console.log(window.e); // undefined
```

**let è§£å†³varçš„é—®é¢˜ï¼š**
```javascript
// è§£å†³å¾ªç¯é—®é¢˜
for (let i = 0; i < 3; i++) {
  setTimeout(() => {
    console.log(i); // 0, 1, 2ï¼ˆæ¯æ¬¡å¾ªç¯éƒ½æœ‰ç‹¬ç«‹çš„iï¼‰
  }, 1000);
}

// å—çº§ä½œç”¨åŸŸ
if (true) {
  let temp = 'test';
  console.log(temp); // 'test'
}
console.log(temp); // ReferenceError

// forå¾ªç¯çš„å—çº§ä½œç”¨åŸŸ
for (let i = 0; i < 3; i++) {
  let i = 'abc'; // å†…å±‚ä½œç”¨åŸŸï¼Œä¸å½±å“å¤–å±‚çš„i
  console.log(i); // 'abc', 'abc', 'abc'
}
```

**æš‚æ—¶æ€§æ­»åŒºè¯¦è§£ï¼š**
```javascript
// ç¤ºä¾‹1ï¼šå—çº§ä½œç”¨åŸŸå†…çš„æš‚æ—¶æ€§æ­»åŒº
let x = 10;
{
  console.log(x); // ReferenceErrorï¼ˆä¸ä¼šè®¿é—®å¤–å±‚çš„xï¼‰
  let x = 20;
}

// ç¤ºä¾‹2ï¼šå‡½æ•°å‚æ•°çš„æš‚æ—¶æ€§æ­»åŒº
function test(x = y, y = 2) { // ReferenceError
  return [x, y];
}
test();

// æ­£ç¡®å†™æ³•
function test2(y = 2, x = y) {
  return [x, y];
}
test2(); // [2, 2]

// ç¤ºä¾‹3ï¼štypeofçš„æš‚æ—¶æ€§æ­»åŒº
typeof x; // ReferenceError
let x;

// å¯¹æ¯”ï¼šæœªå£°æ˜çš„å˜é‡
typeof undeclaredVar; // 'undefined'ï¼ˆä¸æŠ¥é”™ï¼‰
```

---

### 3. const - å¸¸é‡å£°æ˜

**åŸºæœ¬ç‰¹æ€§ï¼š**
```javascript
// 1. å¿…é¡»åˆå§‹åŒ–
const a; // SyntaxError: Missing initializer in const declaration
const a = 1; // æ­£ç¡®

// 2. ä¸èƒ½é‡æ–°èµ‹å€¼
const b = 2;
b = 3; // TypeError: Assignment to constant variable

// 3. å—çº§ä½œç”¨åŸŸ
{
  const c = 3;
  console.log(c); // 3
}
console.log(c); // ReferenceError

// 4. ä¸å…è®¸é‡å¤å£°æ˜
const d = 4;
const d = 5; // SyntaxError

// 5. æš‚æ—¶æ€§æ­»åŒº
console.log(e); // ReferenceError
const e = 5;
```

**const å¯¹è±¡å±æ€§å¯ä»¥ä¿®æ”¹ï¼š**
```javascript
// constå£°æ˜çš„å¯¹è±¡ï¼Œå¼•ç”¨ä¸èƒ½æ”¹å˜ï¼Œä½†å±æ€§å¯ä»¥ä¿®æ”¹
const obj = {
  name: 'å¼ ä¸‰',
  age: 20
};

// âœ… å¯ä»¥ä¿®æ”¹å±æ€§
obj.name = 'æå››';
obj.age = 21;
console.log(obj); // { name: 'æå››', age: 21 }

// âŒ ä¸èƒ½é‡æ–°èµ‹å€¼
obj = { name: 'ç‹äº”' }; // TypeError

// constå£°æ˜çš„æ•°ç»„
const arr = [1, 2, 3];

// âœ… å¯ä»¥ä¿®æ”¹å…ƒç´ 
arr[0] = 10;
arr.push(4);
console.log(arr); // [10, 2, 3, 4]

// âŒ ä¸èƒ½é‡æ–°èµ‹å€¼
arr = [5, 6, 7]; // TypeError

// å¦‚æœéœ€è¦å®Œå…¨ä¸å¯å˜ï¼Œä½¿ç”¨Object.freeze()
const frozenObj = Object.freeze({ name: 'å¼ ä¸‰' });
frozenObj.name = 'æå››'; // é™é»˜å¤±è´¥ï¼ˆä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼‰
console.log(frozenObj.name); // 'å¼ ä¸‰'
```

**const æ·±åº¦å†»ç»“ï¼š**
```javascript
// Object.freeze()åªæ˜¯æµ…å†»ç»“
const obj = {
  name: 'å¼ ä¸‰',
  info: {
    age: 20
  }
};

Object.freeze(obj);

obj.name = 'æå››'; // æ— æ•ˆ
console.log(obj.name); // 'å¼ ä¸‰'

obj.info.age = 21; // âœ… æœ‰æ•ˆï¼ˆåµŒå¥—å¯¹è±¡æ²¡æœ‰å†»ç»“ï¼‰
console.log(obj.info.age); // 21

// æ·±åº¦å†»ç»“å®ç°
function deepFreeze(obj) {
  // å†»ç»“å¯¹è±¡æœ¬èº«
  Object.freeze(obj);

  // é€’å½’å†»ç»“æ‰€æœ‰å±æ€§
  Object.keys(obj).forEach(key => {
    if (typeof obj[key] === 'object' && obj[key] !== null) {
      deepFreeze(obj[key]);
    }
  });

  return obj;
}

const deepFrozenObj = deepFreeze({
  name: 'å¼ ä¸‰',
  info: {
    age: 20
  }
});

deepFrozenObj.info.age = 21; // æ— æ•ˆ
console.log(deepFrozenObj.info.age); // 20
```

---

### ä½¿ç”¨åœºæ™¯å’Œæœ€ä½³å®è·µ

**æ¨èä½¿ç”¨é¡ºåºï¼š**
```
ä¼˜å…ˆä½¿ç”¨ const > å†ç”¨ let > é¿å…ä½¿ç”¨ var
```

**ä½¿ç”¨åœºæ™¯ï¼š**

1. **const**ï¼š
   - âœ… å¸¸é‡å€¼ï¼ˆÏ€ã€é…ç½®é¡¹ç­‰ï¼‰
   - âœ… ä¸éœ€è¦é‡æ–°èµ‹å€¼çš„å˜é‡
   - âœ… å‡½æ•°å£°æ˜
   - âœ… å¯¼å…¥çš„æ¨¡å—

```javascript
// å¸¸é‡
const PI = 3.14159;
const MAX_SIZE = 100;

// é…ç½®
const config = {
  apiUrl: 'https://api.example.com',
  timeout: 5000
};

// å‡½æ•°
const add = (a, b) => a + b;

// å¯¼å…¥
import React from 'react';
const Button = () => <button>Click</button>;
```

2. **let**ï¼š
   - âœ… éœ€è¦é‡æ–°èµ‹å€¼çš„å˜é‡
   - âœ… å¾ªç¯å˜é‡
   - âœ… ä¸´æ—¶å˜é‡

```javascript
// éœ€è¦é‡æ–°èµ‹å€¼
let count = 0;
count++;

// å¾ªç¯
for (let i = 0; i < 10; i++) {
  console.log(i);
}

// ä¸´æ—¶å˜é‡
let temp = arr[0];
arr[0] = arr[1];
arr[1] = temp;
```

3. **var**ï¼š
   - âŒ é¿å…ä½¿ç”¨ï¼ˆä»…åœ¨éœ€è¦å…¼å®¹è€ä»£ç æ—¶ä½¿ç”¨ï¼‰

**æœ€ä½³å®è·µç¤ºä¾‹ï¼š**
```javascript
// âœ… å¥½çš„åšæ³•
const users = [
  { id: 1, name: 'å¼ ä¸‰' },
  { id: 2, name: 'æå››' }
];

for (const user of users) {
  console.log(user.name); // constå¯ä»¥ç”¨äºfor...of
}

let total = 0;
for (let i = 0; i < users.length; i++) {
  total += users[i].id;
}

// âŒ ä¸å¥½çš„åšæ³•
var users2 = []; // åº”è¯¥ç”¨const
var total2 = 0;  // åº”è¯¥ç”¨let
for (var i = 0; i < users2.length; i++) { // åº”è¯¥ç”¨let
  // ...
}
```

**è®°å¿†å£è¯€ï¼š**
```
varå‡½æ•°åŸŸã€ä¼šæå‡ã€å¯é‡å¤ã€èƒ½é‡èµ‹
letå—çº§åŸŸã€ä¸æå‡ã€ç¦é‡å¤ã€èƒ½é‡èµ‹
constå—çº§åŸŸã€ä¸æå‡ã€ç¦é‡å¤ã€ç¦é‡èµ‹
ä¼˜å…ˆconstã€å†ç”¨letã€é¿å…var
```

---

# ç¬¬å››éƒ¨åˆ†ï¼šäº‹ä»¶æœºåˆ¶åŸºç¡€ï¼ˆè¯¦ç»†å®Œæ•´ï¼‰

## ä¸€ã€äº‹ä»¶æµä¸‰é˜¶æ®µ

### äº‹ä»¶æµä¸‰é˜¶æ®µè¯¦è§£ â­â­â­â­â­ ğŸ”¥

**æ ¸å¿ƒæ¦‚å¿µï¼š**
äº‹ä»¶ä¼ æ’­åˆ†ä¸‰ä¸ªé˜¶æ®µï¼š**æ•è·é˜¶æ®µï¼ˆå¤–â†’å†…ï¼‰â†’ ç›®æ ‡é˜¶æ®µ â†’ å†’æ³¡é˜¶æ®µï¼ˆå†…â†’å¤–ï¼‰**

**è§†è§‰ç¤ºæ„ï¼š**
```
æ•è·é˜¶æ®µ (Capture Phase)ï¼šå¤–å±‚ â†’ å†…å±‚
    â†“
ç›®æ ‡é˜¶æ®µ (Target Phase)ï¼šç›®æ ‡å…ƒç´ 
    â†“
å†’æ³¡é˜¶æ®µ (Bubble Phase)ï¼šå†…å±‚ â†’ å¤–å±‚
```

**å®Œæ•´ç¤ºä¾‹ï¼š**
```html
<div id="outer">
  å¤–å±‚
  <div id="middle">
    ä¸­å±‚
    <div id="inner">
      å†…å±‚
    </div>
  </div>
</div>

<script>
const outer = document.getElementById('outer');
const middle = document.getElementById('middle');
const inner = document.getElementById('inner');

// æ•è·é˜¶æ®µï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºtrueï¼‰
outer.addEventListener('click', () => {
  console.log('å¤–å±‚ - æ•è·');
}, true);

middle.addEventListener('click', () => {
  console.log('ä¸­å±‚ - æ•è·');
}, true);

inner.addEventListener('click', () => {
  console.log('å†…å±‚ - æ•è·');
}, true);

// å†’æ³¡é˜¶æ®µï¼ˆç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºfalseæˆ–çœç•¥ï¼‰
outer.addEventListener('click', () => {
  console.log('å¤–å±‚ - å†’æ³¡');
});

middle.addEventListener('click', () => {
  console.log('ä¸­å±‚ - å†’æ³¡');
});

inner.addEventListener('click', () => {
  console.log('å†…å±‚ - å†’æ³¡');
});

// ç‚¹å‡»å†…å±‚divï¼Œè¾“å‡ºé¡ºåºï¼š
// å¤–å±‚ - æ•è·
// ä¸­å±‚ - æ•è·
// å†…å±‚ - æ•è·
// å†…å±‚ - å†’æ³¡
// ä¸­å±‚ - å†’æ³¡
// å¤–å±‚ - å†’æ³¡
</script>
```

**æ‰§è¡Œé¡ºåºæ¼”ç¤ºï¼š**
```javascript
// å®Œæ•´ç¤ºä¾‹ï¼šæ¼”ç¤ºä¸‰ä¸ªé˜¶æ®µ
document.addEventListener('click', () => {
  console.log('1. document - æ•è·');
}, true);

document.body.addEventListener('click', () => {
  console.log('2. body - æ•è·');
}, true);

const parent = document.getElementById('parent');
parent.addEventListener('click', () => {
  console.log('3. parent - æ•è·');
}, true);

const child = document.getElementById('child');
child.addEventListener('click', () => {
  console.log('4. child - ç›®æ ‡');
});

parent.addEventListener('click', () => {
  console.log('5. parent - å†’æ³¡');
});

document.body.addEventListener('click', () => {
  console.log('6. body - å†’æ³¡');
});

document.addEventListener('click', () => {
  console.log('7. document - å†’æ³¡');
});

// ç‚¹å‡»childå…ƒç´ ï¼Œå®Œæ•´è¾“å‡ºï¼š
// 1. document - æ•è·
// 2. body - æ•è·
// 3. parent - æ•è·
// 4. child - ç›®æ ‡
// 5. parent - å†’æ³¡
// 6. body - å†’æ³¡
// 7. document - å†’æ³¡
```

---

### é˜»æ­¢äº‹ä»¶ä¼ æ’­

**ä¸‰ç§é˜»æ­¢ä¼ æ’­çš„æ–¹æ³•ï¼š**

#### 1. stopPropagation() - é˜»æ­¢äº‹ä»¶ä¼ æ’­

```javascript
element.addEventListener('click', (e) => {
  e.stopPropagation(); // é˜»æ­¢äº‹ä»¶ç»§ç»­ä¼ æ’­ï¼ˆæ•è·æˆ–å†’æ³¡ï¼‰
  console.log('äº‹ä»¶åœæ­¢ä¼ æ’­');
});
```

**ç¤ºä¾‹ï¼šé˜»æ­¢å†’æ³¡**
```html
<div id="parent" style="padding: 50px; background: blue;">
  çˆ¶å…ƒç´ 
  <div id="child" style="padding: 20px; background: red;">
    å­å…ƒç´ 
  </div>
</div>

<script>
const parent = document.getElementById('parent');
const child = document.getElementById('child');

parent.addEventListener('click', () => {
  console.log('çˆ¶å…ƒç´ è¢«ç‚¹å‡»');
});

child.addEventListener('click', (e) => {
  e.stopPropagation(); // é˜»æ­¢å†’æ³¡åˆ°çˆ¶å…ƒç´ 
  console.log('å­å…ƒç´ è¢«ç‚¹å‡»');
});

// ç‚¹å‡»å­å…ƒç´ ï¼Œåªè¾“å‡ºï¼šå­å…ƒç´ è¢«ç‚¹å‡»
// ç‚¹å‡»çˆ¶å…ƒç´ ï¼Œè¾“å‡ºï¼šçˆ¶å…ƒç´ è¢«ç‚¹å‡»
</script>
```

---

#### 2. preventDefault() - é˜»æ­¢é»˜è®¤è¡Œä¸º

```javascript
element.addEventListener('click', (e) => {
  e.preventDefault(); // é˜»æ­¢å…ƒç´ çš„é»˜è®¤è¡Œä¸º
  console.log('é»˜è®¤è¡Œä¸ºè¢«é˜»æ­¢');
});
```

**å¸¸è§åº”ç”¨åœºæ™¯ï¼š**
```javascript
// 1. é˜»æ­¢é“¾æ¥è·³è½¬
document.querySelector('a').addEventListener('click', (e) => {
  e.preventDefault();
  console.log('é˜»æ­¢äº†é“¾æ¥è·³è½¬');
});

// 2. é˜»æ­¢è¡¨å•æäº¤
document.querySelector('form').addEventListener('submit', (e) => {
  e.preventDefault();
  console.log('é˜»æ­¢äº†è¡¨å•æäº¤');
  // æ‰§è¡Œè‡ªå®šä¹‰æäº¤é€»è¾‘
});

// 3. é˜»æ­¢å³é”®èœå•
document.addEventListener('contextmenu', (e) => {
  e.preventDefault();
  console.log('é˜»æ­¢äº†å³é”®èœå•');
});

// 4. é˜»æ­¢æ‹–æ‹½é»˜è®¤è¡Œä¸º
element.addEventListener('dragover', (e) => {
  e.preventDefault();
});

element.addEventListener('drop', (e) => {
  e.preventDefault();
  console.log('å¤„ç†æ–‡ä»¶æ‹–æ”¾');
});
```

---

#### 3. stopImmediatePropagation() - ç«‹å³åœæ­¢ä¼ æ’­

```javascript
element.addEventListener('click', (e) => {
  e.stopImmediatePropagation(); // é˜»æ­¢äº‹ä»¶ä¼ æ’­ï¼Œä¸”åŒçº§ç›‘å¬å™¨ä¹Ÿä¸æ‰§è¡Œ
  console.log('ç«‹å³åœæ­¢ä¼ æ’­');
});
```

**ä¸ stopPropagation() çš„åŒºåˆ«ï¼š**
```javascript
const button = document.getElementById('btn');

// ç›‘å¬å™¨1
button.addEventListener('click', (e) => {
  console.log('ç›‘å¬å™¨1');
  e.stopPropagation(); // åªé˜»æ­¢å†’æ³¡ï¼ŒåŒçº§ç›‘å¬å™¨ä»æ‰§è¡Œ
});

// ç›‘å¬å™¨2
button.addEventListener('click', () => {
  console.log('ç›‘å¬å™¨2'); // ä¼šæ‰§è¡Œ
});

// ç‚¹å‡»æŒ‰é’®ï¼Œè¾“å‡ºï¼š
// ç›‘å¬å™¨1
// ç›‘å¬å™¨2

// ========================================

// ç›‘å¬å™¨1
button.addEventListener('click', (e) => {
  console.log('ç›‘å¬å™¨1');
  e.stopImmediatePropagation(); // ç«‹å³åœæ­¢ï¼ŒåŒçº§ç›‘å¬å™¨ä¸æ‰§è¡Œ
});

// ç›‘å¬å™¨2
button.addEventListener('click', () => {
  console.log('ç›‘å¬å™¨2'); // ä¸ä¼šæ‰§è¡Œ
});

// ç‚¹å‡»æŒ‰é’®ï¼Œåªè¾“å‡ºï¼š
// ç›‘å¬å™¨1
```

---

**ä¸‰ç§æ–¹æ³•å¯¹æ¯”è¡¨æ ¼ï¼š**

| æ–¹æ³• | ä½œç”¨ | æ˜¯å¦é˜»æ­¢å†’æ³¡ | æ˜¯å¦é˜»æ­¢é»˜è®¤è¡Œä¸º | æ˜¯å¦é˜»æ­¢åŒçº§ç›‘å¬å™¨ |
|------|------|------------|----------------|------------------|
| **stopPropagation()** | é˜»æ­¢äº‹ä»¶ä¼ æ’­ | âœ… æ˜¯ | âŒ å¦ | âŒ å¦ |
| **preventDefault()** | é˜»æ­¢é»˜è®¤è¡Œä¸º | âŒ å¦ | âœ… æ˜¯ | âŒ å¦ |
| **stopImmediatePropagation()** | ç«‹å³åœæ­¢ä¼ æ’­ | âœ… æ˜¯ | âŒ å¦ | âœ… æ˜¯ |

**è®°å¿†å£è¯€ï¼š**
```
stopé˜»å†’æ³¡ã€preventé˜»é»˜è®¤ã€immediateæœ€å½»åº•
æ•è·ä»å¤–åˆ°å†…ã€å†’æ³¡ä»å†…åˆ°å¤–ã€ç›®æ ‡é˜¶æ®µåœ¨ä¸­é—´
```

---

## äºŒã€äº‹ä»¶å§”æ‰˜

### äº‹ä»¶å§”æ‰˜è¯¦è§£ â­â­â­â­â­ ğŸ”¥

**æ ¸å¿ƒåŸç†ï¼š**
åˆ©ç”¨äº‹ä»¶å†’æ³¡ï¼Œåœ¨çˆ¶å…ƒç´ ç»‘å®šä¸€ä¸ªäº‹ä»¶ï¼Œé€šè¿‡ `event.target` åˆ¤æ–­äº‹ä»¶æº

**ä¸‰å¤§ä¼˜ç‚¹ï¼š**
1. âœ… **å‡å°‘å†…å­˜æ¶ˆè€—**ï¼šåªç»‘å®šä¸€ä¸ªç›‘å¬å™¨ï¼Œè€Œä¸æ˜¯æ¯ä¸ªå­å…ƒç´ éƒ½ç»‘å®š
2. âœ… **åŠ¨æ€å…ƒç´ è‡ªåŠ¨æœ‰äº‹ä»¶**ï¼šæ–°å¢çš„å­å…ƒç´ è‡ªåŠ¨ç»§æ‰¿äº‹ä»¶
3. âœ… **ä»£ç ç®€æ´**ï¼šç»Ÿä¸€ç®¡ç†äº‹ä»¶å¤„ç†

---

### ç®€å•ç¤ºä¾‹

**ä¸ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼ˆâŒ ä¸æ¨èï¼‰ï¼š**
```javascript
// ä¸ºæ¯ä¸ªæŒ‰é’®ç»‘å®šäº‹ä»¶
const buttons = document.querySelectorAll('.item');
buttons.forEach(button => {
  button.addEventListener('click', function() {
    console.log('ç‚¹å‡»äº†:', this.textContent);
  });
});

// é—®é¢˜1ï¼šå†…å­˜æ¶ˆè€—å¤§ï¼ˆ100ä¸ªæŒ‰é’® = 100ä¸ªç›‘å¬å™¨ï¼‰
// é—®é¢˜2ï¼šåŠ¨æ€æ·»åŠ çš„æŒ‰é’®æ²¡æœ‰äº‹ä»¶
const newButton = document.createElement('button');
newButton.className = 'item';
newButton.textContent = 'æ–°æŒ‰é’®';
document.body.appendChild(newButton);
// æ–°æŒ‰é’®ç‚¹å‡»æ²¡æœ‰ååº”ï¼
```

**ä½¿ç”¨äº‹ä»¶å§”æ‰˜ï¼ˆâœ… æ¨èï¼‰ï¼š**
```javascript
// åªåœ¨çˆ¶å…ƒç´ ç»‘å®šä¸€ä¸ªäº‹ä»¶
document.getElementById('list').addEventListener('click', (e) => {
  // åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å¦æ˜¯æŒ‰é’®
  if (e.target.matches('.item')) {
    console.log('ç‚¹å‡»äº†:', e.target.textContent);
  }
});

// ä¼˜ç‚¹1ï¼šåªæœ‰1ä¸ªç›‘å¬å™¨ï¼Œå†…å­˜æ¶ˆè€—å°
// ä¼˜ç‚¹2ï¼šåŠ¨æ€æ·»åŠ çš„æŒ‰é’®è‡ªåŠ¨æœ‰äº‹ä»¶
const newButton = document.createElement('button');
newButton.className = 'item';
newButton.textContent = 'æ–°æŒ‰é’®';
document.getElementById('list').appendChild(newButton);
// æ–°æŒ‰é’®ç‚¹å‡»æœ‰ååº”ï¼
```

---

### å¤æ‚ç¤ºä¾‹

**HTMLç»“æ„ï¼š**
```html
<ul id="list">
  <li data-id="1">
    <span class="name">é¡¹ç›®1</span>
    <button class="edit">ç¼–è¾‘</button>
    <button class="delete">åˆ é™¤</button>
  </li>
  <li data-id="2">
    <span class="name">é¡¹ç›®2</span>
    <button class="edit">ç¼–è¾‘</button>
    <button class="delete">åˆ é™¤</button>
  </li>
</ul>
```

**äº‹ä»¶å§”æ‰˜å¤„ç†ï¼š**
```javascript
const list = document.getElementById('list');

list.addEventListener('click', (e) => {
  const target = e.target;

  // ç‚¹å‡»ç¼–è¾‘æŒ‰é’®
  if (target.matches('.edit')) {
    const li = target.closest('li');
    const id = li.dataset.id;
    const name = li.querySelector('.name').textContent;
    console.log('ç¼–è¾‘é¡¹ç›®ï¼š', id, name);
  }

  // ç‚¹å‡»åˆ é™¤æŒ‰é’®
  if (target.matches('.delete')) {
    const li = target.closest('li');
    const id = li.dataset.id;
    console.log('åˆ é™¤é¡¹ç›®ï¼š', id);
    li.remove();
  }

  // ç‚¹å‡»é¡¹ç›®åç§°
  if (target.matches('.name')) {
    const li = target.closest('li');
    const id = li.dataset.id;
    console.log('ç‚¹å‡»é¡¹ç›®ï¼š', id);
  }
});

// åŠ¨æ€æ·»åŠ æ–°é¡¹ç›®
function addItem(id, name) {
  const li = document.createElement('li');
  li.dataset.id = id;
  li.innerHTML = `
    <span class="name">${name}</span>
    <button class="edit">ç¼–è¾‘</button>
    <button class="delete">åˆ é™¤</button>
  `;
  list.appendChild(li);
}

addItem(3, 'é¡¹ç›®3'); // æ–°å¢çš„é¡¹ç›®è‡ªåŠ¨æœ‰äº‹ä»¶
```

---

### å®Œæ•´å®ç°ï¼ˆEventDelegate ç±»ï¼‰

```javascript
class EventDelegate {
  /**
   * äº‹ä»¶å§”æ‰˜ç±»
   * @param {Element} parent - çˆ¶å…ƒç´ 
   * @param {string} selector - å­å…ƒç´ é€‰æ‹©å™¨
   * @param {string} eventType - äº‹ä»¶ç±»å‹
   * @param {Function} handler - äº‹ä»¶å¤„ç†å‡½æ•°
   */
  constructor(parent, selector, eventType, handler) {
    this.parent = parent;
    this.selector = selector;
    this.eventType = eventType;
    this.handler = handler;

    // ç»‘å®šäº‹ä»¶
    this.listener = (e) => {
      let target = e.target;

      // å‘ä¸ŠæŸ¥æ‰¾åŒ¹é…çš„å…ƒç´ 
      while (target && target !== parent) {
        if (target.matches(selector)) {
          // è°ƒç”¨å¤„ç†å‡½æ•°ï¼ŒthisæŒ‡å‘åŒ¹é…çš„å…ƒç´ 
          handler.call(target, e);
          break;
        }
        target = target.parentElement;
      }
    };

    parent.addEventListener(eventType, this.listener);
  }

  // ç§»é™¤äº‹ä»¶å§”æ‰˜
  destroy() {
    this.parent.removeEventListener(this.eventType, this.listener);
  }
}

// ä½¿ç”¨ç¤ºä¾‹1ï¼šç®€å•åˆ—è¡¨
const delegate1 = new EventDelegate(
  document.getElementById('list'),
  '.item',
  'click',
  function(e) {
    console.log('ç‚¹å‡»äº†:', this.textContent);
  }
);

// ä½¿ç”¨ç¤ºä¾‹2ï¼šå¤æ‚äº¤äº’
const delegate2 = new EventDelegate(
  document.getElementById('todo-list'),
  '.todo-item',
  'click',
  function(e) {
    const target = e.target;

    // ç‚¹å‡»å¤é€‰æ¡†
    if (target.matches('.checkbox')) {
      this.classList.toggle('completed');
    }

    // ç‚¹å‡»åˆ é™¤æŒ‰é’®
    if (target.matches('.delete')) {
      this.remove();
    }
  }
);

// ç§»é™¤äº‹ä»¶å§”æ‰˜
// delegate1.destroy();
// delegate2.destroy();
```

---

### äº‹ä»¶å§”æ‰˜çš„æ³¨æ„äº‹é¡¹

**1. ä¸æ˜¯æ‰€æœ‰äº‹ä»¶éƒ½é€‚åˆå§”æ‰˜ï¼š**
```javascript
// âœ… é€‚åˆå§”æ‰˜çš„äº‹ä»¶ï¼ˆä¼šå†’æ³¡ï¼‰
// clickã€mousedownã€mouseupã€keydownã€keyupã€inputã€changeã€submitç­‰

// âŒ ä¸é€‚åˆå§”æ‰˜çš„äº‹ä»¶ï¼ˆä¸å†’æ³¡ï¼‰
// focusã€blurã€scrollã€loadã€mouseenterã€mouseleaveç­‰

// focus/blur çš„æ›¿ä»£æ–¹æ¡ˆï¼ˆä½¿ç”¨æ•è·é˜¶æ®µæˆ–focusin/focusoutï¼‰
parent.addEventListener('focus', handler, true); // æ•è·é˜¶æ®µ
parent.addEventListener('focusin', handler);     // focusinä¼šå†’æ³¡
```

**2. æ€§èƒ½è€ƒè™‘ï¼š**
```javascript
// âŒ ä¸å¥½ï¼šé¢‘ç¹çš„DOMæŸ¥è¯¢
list.addEventListener('click', (e) => {
  if (e.target.matches('.item')) {
    const parent = e.target.parentElement;
    const siblings = parent.querySelectorAll('.item'); // æ¯æ¬¡éƒ½æŸ¥è¯¢
    // ...
  }
});

// âœ… å¥½ï¼šç¼“å­˜æŸ¥è¯¢ç»“æœ
const list = document.getElementById('list');
list.addEventListener('click', (e) => {
  if (e.target.matches('.item')) {
    // ç›´æ¥ä½¿ç”¨ listï¼Œä¸ç”¨é‡å¤æŸ¥è¯¢
    // ...
  }
});
```

**3. é˜»æ­¢å†’æ³¡çš„å½±å“ï¼š**
```javascript
// å¦‚æœå­å…ƒç´ é˜»æ­¢å†’æ³¡ï¼Œäº‹ä»¶å§”æ‰˜ä¼šå¤±æ•ˆ
const child = document.querySelector('.child');
child.addEventListener('click', (e) => {
  e.stopPropagation(); // é˜»æ­¢å†’æ³¡
  console.log('å­å…ƒç´ ');
});

// çˆ¶å…ƒç´ çš„å§”æ‰˜äº‹ä»¶ä¸ä¼šè§¦å‘
parent.addEventListener('click', () => {
  console.log('çˆ¶å…ƒç´ '); // ä¸ä¼šæ‰§è¡Œ
});
```

**è®°å¿†å£è¯€ï¼š**
```
äº‹ä»¶å§”æ‰˜åˆ©ç”¨å†’æ³¡ï¼Œçˆ¶å…ƒç´ ä»£ç†å­å…ƒç´ 
å‡å°‘å†…å­˜åŠ¨æ€ç»‘ï¼Œtargetåˆ¤æ–­æ˜¯å…³é”®
å‘ä¸ŠæŸ¥æ‰¾ç”¨closestï¼Œmatchesåˆ¤æ–­é€‰æ‹©å™¨
```

---

## ä¸‰ã€äº‹ä»¶å¯¹è±¡

### target vs currentTarget â­â­â­â­â­ ğŸ”¥

**æ ¸å¿ƒåŒºåˆ«ï¼š**
- **target**ï¼šäº‹ä»¶çš„çœŸæ­£è§¦å‘è€…ï¼ˆäº‹ä»¶æºï¼‰
- **currentTarget**ï¼šäº‹ä»¶ç›‘å¬å™¨ç»‘å®šçš„å…ƒç´ ï¼ˆç­‰åŒäº thisï¼‰

**å®Œæ•´ç¤ºä¾‹ï¼š**
```html
<div id="parent" style="padding: 50px; background: lightblue;">
  çˆ¶å…ƒç´ 
  <button id="child">å­æŒ‰é’®</button>
</div>

<script>
const parent = document.getElementById('parent');
const child = document.getElementById('child');

parent.addEventListener('click', function(e) {
  console.log('=== ç‚¹å‡»äº‹ä»¶ ===');
  console.log('e.target:', e.target);               // çœŸæ­£ç‚¹å‡»çš„å…ƒç´ 
  console.log('e.currentTarget:', e.currentTarget); // ç»‘å®šç›‘å¬å™¨çš„å…ƒç´ 
  console.log('this:', this);                       // ç­‰åŒäºcurrentTarget
  console.log('ç›¸ç­‰:', e.currentTarget === this);   // true
});

// ç‚¹å‡»å­æŒ‰é’®ï¼Œè¾“å‡ºï¼š
// e.target: <button id="child">å­æŒ‰é’®</button>
// e.currentTarget: <div id="parent">...</div>
// this: <div id="parent">...</div>
// ç›¸ç­‰: true

// ç‚¹å‡»çˆ¶å…ƒç´ ï¼ˆç©ºç™½åŒºåŸŸï¼‰ï¼Œè¾“å‡ºï¼š
// e.target: <div id="parent">...</div>
// e.currentTarget: <div id="parent">...</div>
// this: <div id="parent">...</div>
// ç›¸ç­‰: true
</script>
```

---

### è¯¦ç»†å¯¹æ¯”

**å¯¹æ¯”è¡¨æ ¼ï¼š**

| å±æ€§ | target | currentTarget |
|------|--------|---------------|
| **æŒ‡å‘** | äº‹ä»¶çš„çœŸæ­£è§¦å‘è€… | äº‹ä»¶ç›‘å¬å™¨ç»‘å®šçš„å…ƒç´  |
| **æ˜¯å¦å˜åŒ–** | âœ… ä¼šå˜åŒ–ï¼ˆå†’æ³¡è¿‡ç¨‹ä¸­ï¼‰ | âŒ ä¸å˜ï¼ˆå§‹ç»ˆæ˜¯ç»‘å®šå…ƒç´ ï¼‰ |
| **ç­‰åŒäº** | äº‹ä»¶æº | thisï¼ˆæ™®é€šå‡½æ•°ä¸­ï¼‰ |
| **ä½¿ç”¨åœºæ™¯** | åˆ¤æ–­å…·ä½“ç‚¹å‡»äº†å“ªä¸ªå…ƒç´  | è·å–ç»‘å®šç›‘å¬å™¨çš„å…ƒç´  |

---

### äº‹ä»¶å§”æ‰˜ä¸­çš„åº”ç”¨

```javascript
document.getElementById('list').addEventListener('click', function(e) {
  console.log('ç‚¹å‡»çš„å…ƒç´ ï¼ˆtargetï¼‰:', e.target.tagName);
  console.log('ç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼ˆcurrentTargetï¼‰:', e.currentTarget.id);
  console.log('this:', this.id);

  // åˆ¤æ–­ç‚¹å‡»çš„æ˜¯å¦æ˜¯æŒ‰é’®
  if (e.target.matches('button')) {
    console.log('ç‚¹å‡»äº†æŒ‰é’®:', e.target.textContent);
  }
});

// ç‚¹å‡»æŒ‰é’®ï¼Œè¾“å‡ºï¼š
// ç‚¹å‡»çš„å…ƒç´ ï¼ˆtargetï¼‰: BUTTON
// ç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼ˆcurrentTargetï¼‰: list
// this: list
// ç‚¹å‡»äº†æŒ‰é’®: xxx
```

---

### ç®­å¤´å‡½æ•°ä¸­çš„ this

```javascript
const parent = document.getElementById('parent');

// æ™®é€šå‡½æ•°ï¼šthis === currentTarget
parent.addEventListener('click', function(e) {
  console.log(this === e.currentTarget); // true
  console.log(this.id); // 'parent'
});

// ç®­å¤´å‡½æ•°ï¼šthis ä¸æŒ‡å‘ currentTarget
parent.addEventListener('click', (e) => {
  console.log(this === e.currentTarget); // false
  console.log(this); // windowï¼ˆæˆ–å¤–å±‚ä½œç”¨åŸŸçš„thisï¼‰
  console.log(e.currentTarget.id); // 'parent'ï¼ˆä½¿ç”¨currentTargetï¼‰
});
```

---

### å¸¸ç”¨äº‹ä»¶å¯¹è±¡å±æ€§

**å®Œæ•´åˆ—è¡¨ï¼š**
```javascript
element.addEventListener('click', (event) => {
  // === äº‹ä»¶ç›®æ ‡ ===
  event.target           // äº‹ä»¶æºï¼ˆçœŸæ­£è§¦å‘äº‹ä»¶çš„å…ƒç´ ï¼‰
  event.currentTarget    // ç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼ˆç­‰åŒäºthisï¼‰

  // === äº‹ä»¶ç±»å‹ ===
  event.type             // äº‹ä»¶ç±»å‹ï¼š'click'ã€'keydown'ç­‰
  event.bubbles          // æ˜¯å¦å†’æ³¡ï¼štrue/false
  event.cancelable       // æ˜¯å¦å¯å–æ¶ˆé»˜è®¤è¡Œä¸ºï¼štrue/false

  // === é¼ æ ‡äº‹ä»¶ ===
  event.clientX          // ç›¸å¯¹äºè§†å£çš„Xåæ ‡
  event.clientY          // ç›¸å¯¹äºè§†å£çš„Yåæ ‡
  event.pageX            // ç›¸å¯¹äºé¡µé¢çš„Xåæ ‡
  event.pageY            // ç›¸å¯¹äºé¡µé¢çš„Yåæ ‡
  event.offsetX          // ç›¸å¯¹äºç›®æ ‡å…ƒç´ çš„Xåæ ‡
  event.offsetY          // ç›¸å¯¹äºç›®æ ‡å…ƒç´ çš„Yåæ ‡
  event.screenX          // ç›¸å¯¹äºå±å¹•çš„Xåæ ‡
  event.screenY          // ç›¸å¯¹äºå±å¹•çš„Yåæ ‡
  event.button           // æŒ‰ä¸‹çš„é¼ æ ‡æŒ‰é’®ï¼š0å·¦é”®ã€1ä¸­é”®ã€2å³é”®

  // === é”®ç›˜äº‹ä»¶ ===
  event.key              // æŒ‰é”®å€¼ï¼š'Enter'ã€'Escape'ã€'a'ç­‰
  event.code             // æŒ‰é”®ä»£ç ï¼š'KeyA'ã€'Enter'ç­‰
  event.keyCode          // æŒ‰é”®ç ï¼ˆå·²åºŸå¼ƒï¼Œç”¨keyä»£æ›¿ï¼‰
  event.ctrlKey          // æ˜¯å¦æŒ‰ä¸‹Ctrl
  event.shiftKey         // æ˜¯å¦æŒ‰ä¸‹Shift
  event.altKey           // æ˜¯å¦æŒ‰ä¸‹Alt
  event.metaKey          // æ˜¯å¦æŒ‰ä¸‹Metaï¼ˆMacçš„Commandé”®ï¼‰

  // === äº‹ä»¶æ§åˆ¶ ===
  event.preventDefault()           // é˜»æ­¢é»˜è®¤è¡Œä¸º
  event.stopPropagation()          // é˜»æ­¢äº‹ä»¶ä¼ æ’­
  event.stopImmediatePropagation() // ç«‹å³åœæ­¢ä¼ æ’­

  // === å…¶ä»– ===
  event.timeStamp        // äº‹ä»¶åˆ›å»ºæ—¶çš„æ—¶é—´æˆ³
  event.isTrusted        // æ˜¯å¦ä¸ºç”¨æˆ·æ“ä½œè§¦å‘ï¼ˆtrueï¼‰æˆ–è„šæœ¬è§¦å‘ï¼ˆfalseï¼‰
  event.detail           // äº‹ä»¶çš„è¯¦ç»†ä¿¡æ¯ï¼ˆå¦‚ç‚¹å‡»æ¬¡æ•°ï¼‰
});
```

---

### å®æˆ˜ç¤ºä¾‹

**ç¤ºä¾‹1ï¼šè·å–é¼ æ ‡åæ ‡**
```javascript
document.addEventListener('click', (e) => {
  console.log({
    'ç›¸å¯¹è§†å£': `(${e.clientX}, ${e.clientY})`,
    'ç›¸å¯¹é¡µé¢': `(${e.pageX}, ${e.pageY})`,
    'ç›¸å¯¹å…ƒç´ ': `(${e.offsetX}, ${e.offsetY})`,
    'ç›¸å¯¹å±å¹•': `(${e.screenX}, ${e.screenY})`
  });
});
```

**ç¤ºä¾‹2ï¼šé”®ç›˜å¿«æ·é”®**
```javascript
document.addEventListener('keydown', (e) => {
  // Ctrl + Sï¼šä¿å­˜
  if (e.ctrlKey && e.key === 's') {
    e.preventDefault();
    console.log('ä¿å­˜');
  }

  // Ctrl + Shift + Fï¼šæ ¼å¼åŒ–
  if (e.ctrlKey && e.shiftKey && e.key === 'f') {
    e.preventDefault();
    console.log('æ ¼å¼åŒ–');
  }

  // Escï¼šå…³é—­
  if (e.key === 'Escape') {
    console.log('å…³é—­');
  }
});
```

**ç¤ºä¾‹3ï¼šåŒå‡»æ£€æµ‹**
```javascript
let clickCount = 0;
let timer = null;

element.addEventListener('click', (e) => {
  clickCount++;

  if (clickCount === 1) {
    timer = setTimeout(() => {
      console.log('å•å‡»');
      clickCount = 0;
    }, 300);
  } else if (clickCount === 2) {
    clearTimeout(timer);
    console.log('åŒå‡»');
    clickCount = 0;
  }
});
```

**è®°å¿†å£è¯€ï¼š**
```
targetæ˜¯æºå¤´ï¼ŒcurrentTargetæ˜¯ç»‘å®š
thisç­‰äºcurrentTargetï¼Œç®­å¤´å‡½æ•°è¦æ³¨æ„
clientXYç›¸å¯¹è§†å£ï¼ŒpageXYç›¸å¯¹é¡µé¢
keyè·å–æŒ‰é”®ï¼ŒctrlKeyåˆ¤æ–­ç»„åˆé”®
```

---

# ä»Šæ—¥ç»ƒä¹ é¢˜

## CSS ç»ƒä¹ é¢˜ï¼ˆ2é¢˜ï¼‰

### é¢˜ç›®1ï¼šè¯·å†™å‡ºä»¥ä¸‹å…ƒç´ çš„å®é™…å®½åº¦
```css
/* æ ‡å‡†ç›’æ¨¡å‹ */
.box1 {
  width: 200px;
  padding: 20px;
  border: 10px solid;
  margin: 10px;
  box-sizing: content-box;
}

/* IEç›’æ¨¡å‹ */
.box2 {
  width: 200px;
  padding: 20px;
  border: 10px solid;
  margin: 10px;
  box-sizing: border-box;
}
```

**ç­”æ¡ˆï¼š**
- box1 å®é™…å ç”¨å®½åº¦ = 10 + 10 + 20 + 200 + 20 + 10 + 10 = 280px
  - contentå®½åº¦ = 200px
- box2 å®é™…å ç”¨å®½åº¦ = 10 + 200 + 10 = 220px
  - contentå®½åº¦ = 200 - 20*2 - 10*2 = 140px

---

### é¢˜ç›®2ï¼šè¯·è®¡ç®—ä»¥ä¸‹é€‰æ‹©å™¨çš„æƒé‡ï¼Œå¹¶è¯´æ˜å“ªä¸ªæ ·å¼ä¼šç”Ÿæ•ˆ
```css
#header .nav li { color: red; }        /* é€‰æ‹©å™¨1 */
.container .nav li { color: blue; }    /* é€‰æ‹©å™¨2 */
div ul li { color: green; }            /* é€‰æ‹©å™¨3 */
li { color: yellow !important; }       /* é€‰æ‹©å™¨4 */
```

**ç­”æ¡ˆï¼š**
- é€‰æ‹©å™¨1 æƒé‡ï¼š100 + 10 + 1 = 111
- é€‰æ‹©å™¨2 æƒé‡ï¼š10 + 10 + 1 = 21
- é€‰æ‹©å™¨3 æƒé‡ï¼š1 + 1 + 1 = 3
- é€‰æ‹©å™¨4 æƒé‡ï¼šâˆï¼ˆ!importantæœ€é«˜ï¼‰

**æœ€ç»ˆç”Ÿæ•ˆï¼šé€‰æ‹©å™¨4 çš„ yellow**ï¼Œå› ä¸º !important ä¼˜å…ˆçº§æœ€é«˜

---

## Vue ç»ƒä¹ é¢˜ï¼ˆ3é¢˜ï¼‰

### é¢˜ç›®1ï¼šref å’Œ reactive æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿä»¥ä¸‹ä»£ç è¾“å‡ºä»€ä¹ˆï¼Ÿ
```javascript
import { ref, reactive } from 'vue';

const count1 = ref(0);
const count2 = reactive({ value: 0 });

console.log(count1.value);     // ?
console.log(count2.value);     // ?

count1.value = 1;
count2 = { value: 1 };

console.log(count1.value);     // ?
console.log(count2.value);     // ?
```

**ç­”æ¡ˆï¼š**
```javascript
console.log(count1.value);     // 0
console.log(count2.value);     // 0

count1.value = 1;              // âœ… æ­£ç¡®
count2 = { value: 1 };         // âŒ é”™è¯¯ï¼å¤±å»å“åº”å¼

console.log(count1.value);     // 1
console.log(count2.value);     // 0ï¼ˆcount2é‡æ–°èµ‹å€¼å¤±å»å“åº”å¼ï¼‰
```

**æ­£ç¡®åšæ³•ï¼š**
```javascript
count2.value = 1;  // âœ… ä¿®æ”¹å±æ€§
```

---

### é¢˜ç›®2ï¼šVue2 å’Œ Vue3 å“åº”å¼åŸç†æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**ç­”æ¡ˆï¼š**

| ç‰¹æ€§ | Vue2 | Vue3 |
|------|------|------|
| **å®ç°æ–¹å¼** | Object.defineProperty | Proxy |
| **ç›‘å¬æ–°å¢å±æ€§** | âŒ æ— æ³•ç›‘å¬ | âœ… å¯ä»¥ç›‘å¬ |
| **ç›‘å¬æ•°ç»„ç´¢å¼•** | âŒ æ— æ³•ç›‘å¬ | âœ… å¯ä»¥ç›‘å¬ |
| **æ€§èƒ½** | éœ€é€’å½’éå†æ‰€æœ‰å±æ€§ | æ‡’ä»£ç†ï¼ŒæŒ‰éœ€ä»£ç† |

---

### é¢˜ç›®3ï¼šcomputed å’Œ watch æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**ç­”æ¡ˆï¼š**

| ç‰¹æ€§ | computed | watch |
|------|----------|-------|
| **ç¼“å­˜** | âœ… æœ‰ç¼“å­˜ | âŒ æ— ç¼“å­˜ |
| **è¿”å›å€¼** | âœ… å¿…é¡»æœ‰ | âŒ æ—  |
| **å¼‚æ­¥** | âŒ ä¸æ”¯æŒ | âœ… æ”¯æŒ |
| **ä½¿ç”¨åœºæ™¯** | è®¡ç®—æ´¾ç”Ÿæ•°æ® | æ‰§è¡Œå‰¯ä½œç”¨æ“ä½œ |

---

## JavaScript ç»ƒä¹ é¢˜ï¼ˆ2é¢˜ï¼‰

### é¢˜ç›®1ï¼šè¯·å†™å‡ºä»¥ä¸‹ä»£ç çš„è¾“å‡º
```javascript
console.log(typeof null);
console.log(typeof []);
console.log(typeof function(){});

console.log([] instanceof Array);
console.log({} instanceof Object);

console.log(Object.prototype.toString.call(null));
console.log(Object.prototype.toString.call([]));
```

**ç­”æ¡ˆï¼š**
```javascript
console.log(typeof null);          // 'object'ï¼ˆå†å²bugï¼‰
console.log(typeof []);            // 'object'
console.log(typeof function(){});  // 'function'

console.log([] instanceof Array);  // true
console.log({} instanceof Object); // true

console.log(Object.prototype.toString.call(null));  // '[object Null]'
console.log(Object.prototype.toString.call([]));    // '[object Array]'
```

---

### é¢˜ç›®2ï¼švarã€letã€const æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**ç­”æ¡ˆï¼š**

| ç‰¹æ€§ | var | let | const |
|------|-----|-----|-------|
| **ä½œç”¨åŸŸ** | å‡½æ•°ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ | å—çº§ä½œç”¨åŸŸ |
| **å˜é‡æå‡** | âœ… æå‡ | âŒ ä¸æå‡ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰ | âŒ ä¸æå‡ï¼ˆæš‚æ—¶æ€§æ­»åŒºï¼‰ |
| **é‡å¤å£°æ˜** | âœ… å…è®¸ | âŒ ä¸å…è®¸ | âŒ ä¸å…è®¸ |
| **é‡æ–°èµ‹å€¼** | âœ… å…è®¸ | âœ… å…è®¸ | âŒ ä¸å…è®¸ |

---

## äº‹ä»¶æœºåˆ¶ç»ƒä¹ é¢˜ï¼ˆ2é¢˜ï¼‰

### é¢˜ç›®1ï¼šäº‹ä»¶æµæœ‰å“ªä¸‰ä¸ªé˜¶æ®µï¼Ÿæ‰§è¡Œé¡ºåºæ˜¯ä»€ä¹ˆï¼Ÿ
**ç­”æ¡ˆï¼š**

äº‹ä»¶æµä¸‰ä¸ªé˜¶æ®µï¼š
1. **æ•è·é˜¶æ®µ**ï¼ˆCapture Phaseï¼‰ï¼šä»å¤–å±‚åˆ°å†…å±‚ï¼ˆdocument â†’ ç›®æ ‡å…ƒç´ ï¼‰
2. **ç›®æ ‡é˜¶æ®µ**ï¼ˆTarget Phaseï¼‰ï¼šåˆ°è¾¾ç›®æ ‡å…ƒç´ 
3. **å†’æ³¡é˜¶æ®µ**ï¼ˆBubble Phaseï¼‰ï¼šä»å†…å±‚åˆ°å¤–å±‚ï¼ˆç›®æ ‡å…ƒç´  â†’ documentï¼‰

**æ‰§è¡Œé¡ºåºï¼š**
```
æ•è·é˜¶æ®µ â†’ ç›®æ ‡é˜¶æ®µ â†’ å†’æ³¡é˜¶æ®µ
```

---

### é¢˜ç›®2ï¼štarget å’Œ currentTarget æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
**ç­”æ¡ˆï¼š**

| å±æ€§ | target | currentTarget |
|------|--------|---------------|
| **æŒ‡å‘** | äº‹ä»¶çš„çœŸæ­£è§¦å‘è€…ï¼ˆäº‹ä»¶æºï¼‰ | äº‹ä»¶ç›‘å¬å™¨ç»‘å®šçš„å…ƒç´  |
| **ç­‰åŒäº** | æ—  | thisï¼ˆæ™®é€šå‡½æ•°ä¸­ï¼‰ |
| **ä½¿ç”¨åœºæ™¯** | åˆ¤æ–­å…·ä½“ç‚¹å‡»äº†å“ªä¸ªå…ƒç´  | è·å–ç»‘å®šç›‘å¬å™¨çš„å…ƒç´  |

**ç¤ºä¾‹ï¼š**
```javascript
parent.addEventListener('click', function(e) {
  console.log(e.target);        // ç‚¹å‡»çš„å…·ä½“å…ƒç´ ï¼ˆå¯èƒ½æ˜¯å­å…ƒç´ ï¼‰
  console.log(e.currentTarget); // parentï¼ˆç»‘å®šäº‹ä»¶çš„å…ƒç´ ï¼‰
  console.log(this);            // parentï¼ˆç­‰åŒäºcurrentTargetï¼‰
});
```

---

# ä»Šæ—¥æ€»ç»“

## æ ¸å¿ƒçŸ¥è¯†ç‚¹å›é¡¾

### CSS æ ¸å¿ƒå£è¯€
```
æ ‡å‡†ç›’æ¨¡å‹ï¼šwidthåªæ˜¯content
IEç›’æ¨¡å‹ï¼šwidthåŒ…å«paddingå’Œborder

!importantæœ€éœ¸é“
è¡Œå†…æ ·å¼æƒé‡åƒ
IDä¸€ç™¾ç±»åä¸ª
æ ‡ç­¾ä¸€åˆ†é€šé…é›¶
```

### Vue æ ¸å¿ƒå£è¯€
```
Vue2ç”¨definePropertyï¼ŒVue3ç”¨Proxyä»£ç†
reféœ€valueï¼Œreactiveä¸éœ€
computedè®¡ç®—ç¼“å­˜ï¼Œwatchä¾¦å¬å‰¯ä½œç”¨
```

### JavaScript æ ¸å¿ƒå£è¯€
```
æ•°ä¸²å¸ƒç©ºæœªï¼Œç¬¦å·å¤§æ•´ï¼Œå¯¹è±¡ä¸€å®¶äº²

typeofå¿«é€Ÿçœ‹åŸºæœ¬ï¼ŒinstanceofæŸ¥åŸå‹é“¾
toStringæœ€å‡†ç¡®ï¼ŒArrayä¸“é—¨åˆ¤æ•°ç»„

varå‡½æ•°åŸŸã€let/constå—çº§åŸŸ
ä¼˜å…ˆconstã€å†ç”¨letã€é¿å…var
```

### äº‹ä»¶æœºåˆ¶æ ¸å¿ƒå£è¯€
```
æ•è·ä»å¤–åˆ°å†…ã€å†’æ³¡ä»å†…åˆ°å¤–ã€ç›®æ ‡é˜¶æ®µåœ¨ä¸­é—´
stopé˜»å†’æ³¡ã€preventé˜»é»˜è®¤ã€immediateæœ€å½»åº•
äº‹ä»¶å§”æ‰˜åˆ©ç”¨å†’æ³¡ï¼Œçˆ¶å…ƒç´ ä»£ç†å­å…ƒç´ 
targetæ˜¯æºå¤´ï¼ŒcurrentTargetæ˜¯ç»‘å®š
```

---

## æ˜æ—¥é¢„å‘Š - ç¬¬äºŒå¤©å­¦ä¹ å†…å®¹

### ç¬¬äºŒå¤©å°†å­¦ä¹ ï¼š
1. **CSSå¸ƒå±€**ï¼šFlexå¸ƒå±€ã€Gridå¸ƒå±€ã€å®šä½
2. **Vueè¿›é˜¶**ï¼šç”Ÿå‘½å‘¨æœŸã€ç»„ä»¶é€šä¿¡ã€è·¯ç”±
3. **JavaScriptè¿›é˜¶**ï¼šthisæŒ‡å‘ã€é—­åŒ…ã€åŸå‹é“¾
4. **å¼‚æ­¥ç¼–ç¨‹**ï¼šPromiseã€async/awaitã€äº‹ä»¶å¾ªç¯

### å­¦ä¹ å»ºè®®ï¼š
1. ä»Šå¤©çš„å†…å®¹è¦å®Œå…¨ç†è§£ï¼Œä¸è¦æ€¥äºè¿›å…¥æ˜å¤©
2. å¤šåšç»ƒä¹ é¢˜ï¼Œå·©å›ºä»Šå¤©çš„çŸ¥è¯†ç‚¹
3. æŠŠæ‰€æœ‰è®°å¿†å£è¯€èƒŒä¸‹æ¥
4. å°è¯•ç”¨è‡ªå·±çš„è¯è§£é‡Šä»Šå¤©çš„æ¦‚å¿µ

---

**ç¥ä½ å­¦ä¹ é¡ºåˆ©ï¼åŠ æ²¹ï¼ğŸ’ª**