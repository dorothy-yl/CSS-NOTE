<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS宽高比自适应容器教学</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 40px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        h1 {
            color: #764ba2;
            margin-bottom: 30px;
            text-align: center;
            font-size: 2.5rem;
        }

        h2 {
            color: #667eea;
            margin: 30px 0 20px 0;
            padding-bottom: 10px;
            border-bottom: 2px solid #667eea;
        }

        .method-section {
            margin-bottom: 40px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
        }

        .demo-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .demo-item {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .demo-title {
            font-weight: bold;
            color: #764ba2;
            margin-bottom: 10px;
        }

        code {
            background: #f0f0f0;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            color: #e83e8c;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 10px 0;
        }

        .code-block {
            background: #2c3e50;
            color: #ecf0f1;
            border: 1px solid #34495e;
            border-left: 4px solid #3498db;
            border-radius: 4px;
            padding: 15px;
            margin: 10px 0;
            font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
            font-size: 14px;
            overflow-x: auto;
            white-space: pre;
            line-height: 1.6;
        }

        /* 方法1: Padding-Top 技巧 */
        .ratio-padding-wrapper {
            width: 100%;
            position: relative;
            background: linear-gradient(45deg, #ff6b6b, #feca57);
        }

        /* 16:9 比例 */
        .ratio-16-9-padding {
            padding-top: 56.25%; /* 9/16 = 0.5625 */
        }

        /* 4:3 比例 */
        .ratio-4-3-padding {
            padding-top: 75%; /* 3/4 = 0.75 */
        }

        /* 1:1 正方形 */
        .ratio-1-1-padding {
            padding-top: 100%;
        }

        .ratio-padding-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        /* 方法2: Aspect-Ratio 属性 */
        .ratio-aspect {
            width: 100%;
            background: linear-gradient(135deg, #667eea, #764ba2);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        .ratio-16-9-aspect {
            aspect-ratio: 16 / 9;
        }

        .ratio-4-3-aspect {
            aspect-ratio: 4 / 3;
        }

        .ratio-1-1-aspect {
            aspect-ratio: 1 / 1;
        }

        .ratio-21-9-aspect {
            aspect-ratio: 21 / 9;
        }

        /* 方法3: 使用伪元素 */
        .ratio-pseudo-wrapper {
            width: 100%;
            position: relative;
            background: linear-gradient(45deg, #48dbfb, #0abde3);
            overflow: hidden;
        }

        .ratio-pseudo-wrapper::before {
            content: '';
            display: block;
        }

        .ratio-16-9-pseudo::before {
            padding-top: 56.25%;
        }

        .ratio-4-3-pseudo::before {
            padding-top: 75%;
        }

        .ratio-pseudo-content {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
        }

        /* 方法4: Grid 布局 */
        .ratio-grid {
            display: grid;
            width: 100%;
            background: linear-gradient(135deg, #f093fb, #f5576c);
        }

        .ratio-16-9-grid {
            grid-template-rows: minmax(0, calc(100vw * 9 / 16));
        }

        .ratio-grid-content {
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            overflow: hidden;
        }

        /* 方法5: CSS变量实现动态比例 */
        .ratio-var {
            --aspect-ratio: 16/9;
            width: 100%;
            aspect-ratio: var(--aspect-ratio);
            background: linear-gradient(45deg, #fa709a, #fee140);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            font-weight: bold;
            transition: aspect-ratio 0.3s ease;
        }

        /* 响应式设计 */
        .responsive-container {
            max-width: 600px;
            margin: 20px auto;
        }

        /* 控制按钮样式 */
        .controls {
            margin: 20px 0;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 8px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
        }

        .btn:hover {
            background: #764ba2;
        }

        /* 视频容器示例 */
        .video-container {
            width: 100%;
            max-width: 800px;
            margin: 20px auto;
        }

        .video-wrapper {
            position: relative;
            padding-top: 56.25%;
            background: #000;
            border-radius: 10px;
            overflow: hidden;
        }

        .video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 48px;
        }

        /* 图片容器示例 */
        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .image-item {
            aspect-ratio: 1;
            background: linear-gradient(45deg, #e0e0e0, #f5f5f5);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            color: #666;
        }

        /* 兼容性提示 */
        .compatibility-note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .compatibility-note h3 {
            color: #856404;
            margin-bottom: 10px;
        }

        /* 性能对比表格 */
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }

        th {
            background: #667eea;
            color: white;
        }

        tr:nth-child(even) {
            background: #f8f9fa;
        }

        .check { color: #28a745; }
        .cross { color: #dc3545; }
    </style>
</head>
<body>
    <div class="container">
        <h1>CSS 宽高比自适应容器完全指南</h1>

        <div class="method-section">
            <h2>📚 什么是宽高比自适应容器？</h2>
            <p>宽高比自适应容器是指能够在不同屏幕尺寸下保持固定宽高比例的响应式容器。常见应用场景包括视频播放器、图片展示、卡片布局等。</p>
        </div>

        <div class="method-section">
            <h2>方法一：Aspect-Ratio 属性（现代推荐方案）</h2>
            <p>CSS3 新增的 <code>aspect-ratio</code> 属性是最简洁的解决方案，支持直接设置宽高比。</p>

            <pre><code>/* 基本语法 */
.container {
    width: 100%;
    aspect-ratio: 16 / 9;  /* 宽度:高度 */
}

/* 也可以使用小数 */
.container {
    aspect-ratio: 1.777;  /* 16/9 ≈ 1.777 */
}</code></pre>

            <div class="demo-grid">
                <div class="demo-item">
                    <div class="demo-title">16:9 宽屏比例</div>
                    <div class="ratio-aspect ratio-16-9-aspect">16:9</div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">4:3 传统比例</div>
                    <div class="ratio-aspect ratio-4-3-aspect">4:3</div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">1:1 正方形</div>
                    <div class="ratio-aspect ratio-1-1-aspect">1:1</div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">21:9 超宽屏</div>
                    <div class="ratio-aspect ratio-21-9-aspect">21:9</div>
                </div>
            </div>
        </div>

        <div class="method-section">
            <h2>方法二：Padding-Top 百分比技巧（经典方案）</h2>
            <p>利用 padding 百分比是相对于父元素宽度计算的特性来实现固定比例。</p>

            <pre><code>/* HTML结构 */
&lt;div class="ratio-wrapper"&gt;
    &lt;div class="ratio-content"&gt;内容&lt;/div&gt;
&lt;/div&gt;

/* CSS样式 */
.ratio-wrapper {
    position: relative;
    width: 100%;
    padding-top: 56.25%;  /* 16:9 比例 (9/16 = 0.5625) */
}

.ratio-content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}</code></pre>

            <div class="demo-grid">
                <div class="demo-item">
                    <div class="demo-title">16:9 视频比例</div>
                    <div class="ratio-padding-wrapper ratio-16-9-padding">
                        <div class="ratio-padding-content">16:9</div>
                    </div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">4:3 标准比例</div>
                    <div class="ratio-padding-wrapper ratio-4-3-padding">
                        <div class="ratio-padding-content">4:3</div>
                    </div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">1:1 正方形</div>
                    <div class="ratio-padding-wrapper ratio-1-1-padding">
                        <div class="ratio-padding-content">1:1</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="method-section">
            <h2>方法三：使用伪元素</h2>
            <p>通过伪元素创建占位空间，保持容器比例。</p>

            <pre><code>/* CSS样式 */
.ratio-container {
    position: relative;
    width: 100%;
    overflow: hidden;
}

.ratio-container::before {
    content: '';
    display: block;
    padding-top: 56.25%;  /* 16:9 比例 */
}

.ratio-container .content {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
}</code></pre>

            <div class="demo-grid">
                <div class="demo-item">
                    <div class="demo-title">16:9 伪元素实现</div>
                    <div class="ratio-pseudo-wrapper ratio-16-9-pseudo">
                        <div class="ratio-pseudo-content">伪元素 16:9</div>
                    </div>
                </div>
                <div class="demo-item">
                    <div class="demo-title">4:3 伪元素实现</div>
                    <div class="ratio-pseudo-wrapper ratio-4-3-pseudo">
                        <div class="ratio-pseudo-content">伪元素 4:3</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="method-section">
            <h2>方法四：CSS 变量动态控制</h2>
            <p>使用 CSS 变量可以动态调整宽高比，适合需要动态改变比例的场景。</p>

            <pre><code>/* CSS样式 */
.dynamic-ratio {
    --ratio: 16/9;  /* 默认比例 */
    width: 100%;
    aspect-ratio: var(--ratio);
}

/* JavaScript 动态修改 */
element.style.setProperty('--ratio', '4/3');</code></pre>

            <div class="responsive-container">
                <div class="controls">
                    <button class="btn" onclick="changeRatio('16/9')">16:9</button>
                    <button class="btn" onclick="changeRatio('4/3')">4:3</button>
                    <button class="btn" onclick="changeRatio('1/1')">1:1</button>
                    <button class="btn" onclick="changeRatio('21/9')">21:9</button>
                </div>
                <div id="dynamicRatio" class="ratio-var">动态比例容器</div>
            </div>
        </div>

        <div class="method-section">
            <h2>方法五：视口单位计算</h2>
            <p>使用视口单位（vw）结合 calc() 函数实现响应式比例。</p>

            <pre><code>/* 限制最大宽度的 16:9 容器 */
.viewport-ratio {
    width: 100%;
    max-width: 90vw;
    height: calc(90vw * 9 / 16);
    max-height: 50vh;
}

/* 自适应容器 */
@media (max-width: 768px) {
    .viewport-ratio {
        height: calc(100vw * 9 / 16);
    }
}</code></pre>
        </div>

        <div class="method-section">
            <h2>🎯 实际应用场景</h2>

            <h3>1. 视频播放器容器</h3>
            <div class="video-container">
                <div class="video-wrapper">
                    <div class="video-placeholder">▶️</div>
                </div>
            </div>

            <h3>2. 响应式图片网格</h3>
            <div class="image-grid">
                <div class="image-item">图片 1:1</div>
                <div class="image-item">图片 1:1</div>
                <div class="image-item">图片 1:1</div>
                <div class="image-item">图片 1:1</div>
            </div>
        </div>

        <div class="method-section">
            <h2>📊 方法对比</h2>
            <table>
                <thead>
                    <tr>
                        <th>方法</th>
                        <th>浏览器兼容性</th>
                        <th>代码简洁度</th>
                        <th>灵活性</th>
                        <th>推荐场景</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>aspect-ratio</td>
                        <td>现代浏览器 <span class="check">✓</span></td>
                        <td>⭐⭐⭐⭐⭐</td>
                        <td>高</td>
                        <td>新项目首选</td>
                    </tr>
                    <tr>
                        <td>padding-top</td>
                        <td>所有浏览器 <span class="check">✓</span></td>
                        <td>⭐⭐⭐</td>
                        <td>中</td>
                        <td>兼容性要求高的项目</td>
                    </tr>
                    <tr>
                        <td>伪元素</td>
                        <td>所有浏览器 <span class="check">✓</span></td>
                        <td>⭐⭐⭐</td>
                        <td>中</td>
                        <td>不需要额外 DOM 时</td>
                    </tr>
                    <tr>
                        <td>CSS 变量</td>
                        <td>现代浏览器 <span class="check">✓</span></td>
                        <td>⭐⭐⭐⭐</td>
                        <td>很高</td>
                        <td>需要动态调整比例</td>
                    </tr>
                    <tr>
                        <td>视口单位</td>
                        <td>现代浏览器 <span class="check">✓</span></td>
                        <td>⭐⭐⭐</td>
                        <td>高</td>
                        <td>特殊响应式需求</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="compatibility-note">
            <h3>⚠️ 兼容性注意事项</h3>
            <ul>
                <li><strong>aspect-ratio：</strong>需要 Chrome 88+, Firefox 89+, Safari 15+</li>
                <li><strong>CSS 变量：</strong>需要 IE11 以上版本</li>
                <li><strong>Padding 技巧：</strong>所有浏览器都支持，是最安全的选择</li>
                <li><strong>建议：</strong>使用 aspect-ratio 并提供 padding-top 作为降级方案</li>
            </ul>
        </div>

        <div class="method-section">
            <h2>💡 最佳实践建议</h2>
            <ol>
                <li><strong>优先使用 aspect-ratio：</strong>代码简洁，性能最好</li>
                <li><strong>提供降级方案：</strong>为旧浏览器提供 padding-top 备选方案</li>
                <li><strong>考虑内容溢出：</strong>添加 overflow: hidden 防止内容溢出</li>
                <li><strong>响应式断点：</strong>在不同屏幕尺寸下可能需要调整比例</li>
                <li><strong>性能优化：</strong>避免过度嵌套，减少重排重绘</li>
            </ol>
        </div>

        <div class="method-section">
            <h2>🔧 完整示例：响应式视频容器</h2>
            <pre><code>/* 现代浏览器 + 降级方案 */
.video-responsive {
    width: 100%;
    max-width: 1200px;
    margin: 0 auto;

    /* 现代浏览器 */
    aspect-ratio: 16 / 9;

    /* 降级方案（使用 @supports） */
    @supports not (aspect-ratio: 16 / 9) {
        position: relative;
        padding-top: 56.25%;
    }
}

.video-responsive iframe,
.video-responsive video {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
}

/* 响应式调整 */
@media (max-width: 768px) {
    .video-responsive {
        aspect-ratio: 4 / 3;  /* 移动端使用 4:3 */
    }

    @supports not (aspect-ratio: 4 / 3) {
        padding-top: 75%;
    }
}</code></pre>
        </div>
    </div>

    <script>
        // 动态改变比例演示
        function changeRatio(ratio) {
            const element = document.getElementById('dynamicRatio');
            element.style.setProperty('--aspect-ratio', ratio);
            element.textContent = `比例: ${ratio}`;
        }

        // 添加交互效果
        document.querySelectorAll('.demo-item').forEach(item => {
            item.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-5px)';
                this.style.boxShadow = '0 5px 20px rgba(0,0,0,0.2)';
            });

            item.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
                this.style.boxShadow = '0 2px 10px rgba(0,0,0,0.1)';
            });
        });
    </script>
</body>
</html>